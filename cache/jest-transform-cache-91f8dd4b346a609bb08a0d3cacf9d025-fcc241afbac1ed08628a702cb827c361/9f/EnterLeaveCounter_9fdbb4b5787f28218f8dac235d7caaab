9e7b54cac71082c986bf35984afc2242
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.EnterLeaveCounter = void 0;
var _js_utils = require("./utils/js_utils.js");
class EnterLeaveCounter {
  enter(enteringNode) {
    const previousLength = this.entered.length;
    const isNodeEntered = node => this.isNodeInDocument(node) && (!node.contains || node.contains(enteringNode));
    this.entered = (0, _js_utils.union)(this.entered.filter(isNodeEntered), [enteringNode]);
    return previousLength === 0 && this.entered.length > 0;
  }
  leave(leavingNode) {
    const previousLength = this.entered.length;
    this.entered = (0, _js_utils.without)(this.entered.filter(this.isNodeInDocument), leavingNode);
    return previousLength > 0 && this.entered.length === 0;
  }
  reset() {
    this.entered = [];
  }
  constructor(isNodeInDocument) {
    this.entered = [];
    this.isNodeInDocument = isNodeInDocument;
  }
}
exports.EnterLeaveCounter = EnterLeaveCounter;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfanNfdXRpbHMiLCJyZXF1aXJlIiwiRW50ZXJMZWF2ZUNvdW50ZXIiLCJlbnRlciIsImVudGVyaW5nTm9kZSIsInByZXZpb3VzTGVuZ3RoIiwiZW50ZXJlZCIsImxlbmd0aCIsImlzTm9kZUVudGVyZWQiLCJub2RlIiwiaXNOb2RlSW5Eb2N1bWVudCIsImNvbnRhaW5zIiwidW5pb24iLCJmaWx0ZXIiLCJsZWF2ZSIsImxlYXZpbmdOb2RlIiwid2l0aG91dCIsInJlc2V0IiwiY29uc3RydWN0b3IiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiLi4vc3JjL0VudGVyTGVhdmVDb3VudGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVuaW9uLCB3aXRob3V0IH0gZnJvbSAnLi91dGlscy9qc191dGlscy5qcydcblxudHlwZSBOb2RlUHJlZGljYXRlID0gKG5vZGU6IE5vZGUgfCBudWxsIHwgdW5kZWZpbmVkKSA9PiBib29sZWFuXG5cbmV4cG9ydCBjbGFzcyBFbnRlckxlYXZlQ291bnRlciB7XG5cdHByaXZhdGUgZW50ZXJlZDogYW55W10gPSBbXVxuXHRwcml2YXRlIGlzTm9kZUluRG9jdW1lbnQ6IE5vZGVQcmVkaWNhdGVcblxuXHRwdWJsaWMgY29uc3RydWN0b3IoaXNOb2RlSW5Eb2N1bWVudDogTm9kZVByZWRpY2F0ZSkge1xuXHRcdHRoaXMuaXNOb2RlSW5Eb2N1bWVudCA9IGlzTm9kZUluRG9jdW1lbnRcblx0fVxuXG5cdHB1YmxpYyBlbnRlcihlbnRlcmluZ05vZGU6IEV2ZW50VGFyZ2V0IHwgbnVsbCk6IGJvb2xlYW4ge1xuXHRcdGNvbnN0IHByZXZpb3VzTGVuZ3RoID0gdGhpcy5lbnRlcmVkLmxlbmd0aFxuXG5cdFx0Y29uc3QgaXNOb2RlRW50ZXJlZCA9IChub2RlOiBOb2RlKTogYm9vbGVhbiA9PlxuXHRcdFx0dGhpcy5pc05vZGVJbkRvY3VtZW50KG5vZGUpICYmXG5cdFx0XHQoIW5vZGUuY29udGFpbnMgfHwgbm9kZS5jb250YWlucyhlbnRlcmluZ05vZGUgYXMgTm9kZSkpXG5cblx0XHR0aGlzLmVudGVyZWQgPSB1bmlvbih0aGlzLmVudGVyZWQuZmlsdGVyKGlzTm9kZUVudGVyZWQpLCBbZW50ZXJpbmdOb2RlXSlcblxuXHRcdHJldHVybiBwcmV2aW91c0xlbmd0aCA9PT0gMCAmJiB0aGlzLmVudGVyZWQubGVuZ3RoID4gMFxuXHR9XG5cblx0cHVibGljIGxlYXZlKGxlYXZpbmdOb2RlOiBFdmVudFRhcmdldCB8IG51bGwpOiBib29sZWFuIHtcblx0XHRjb25zdCBwcmV2aW91c0xlbmd0aCA9IHRoaXMuZW50ZXJlZC5sZW5ndGhcblxuXHRcdHRoaXMuZW50ZXJlZCA9IHdpdGhvdXQoXG5cdFx0XHR0aGlzLmVudGVyZWQuZmlsdGVyKHRoaXMuaXNOb2RlSW5Eb2N1bWVudCksXG5cdFx0XHRsZWF2aW5nTm9kZSxcblx0XHQpXG5cblx0XHRyZXR1cm4gcHJldmlvdXNMZW5ndGggPiAwICYmIHRoaXMuZW50ZXJlZC5sZW5ndGggPT09IDBcblx0fVxuXG5cdHB1YmxpYyByZXNldCgpOiB2b2lkIHtcblx0XHR0aGlzLmVudGVyZWQgPSBbXVxuXHR9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLFNBQUEsR0FBQUMsT0FBQTtBQUlPLE1BQU1DLGlCQUFpQjtFQVE3QkMsS0FBWUEsQ0FBQ0MsWUFBZ0MsRUFBVztJQUN2RCxNQUFNQyxjQUFjLEdBQUcsSUFBSSxDQUFDQyxPQUFPLENBQUNDLE1BQU07SUFFMUMsTUFBTUMsYUFBYSxHQUFJQyxJQUFVLElBQ2hDLElBQUksQ0FBQ0MsZ0JBQWdCLENBQUNELElBQUksQ0FBQyxLQUMxQixDQUFDQSxJQUFJLENBQUNFLFFBQVEsSUFBSUYsSUFBSSxDQUFDRSxRQUFRLENBQUNQLFlBQVksQ0FBUyxDQUFDO0lBRXhELElBQUksQ0FBQ0UsT0FBTyxHQUFHLElBQUFNLGVBQUssRUFBQyxJQUFJLENBQUNOLE9BQU8sQ0FBQ08sTUFBTSxDQUFDTCxhQUFhLENBQUMsRUFBRSxDQUFDSixZQUFZLENBQUMsQ0FBQztJQUV4RSxPQUFPQyxjQUFjLEtBQUssQ0FBQyxJQUFJLElBQUksQ0FBQ0MsT0FBTyxDQUFDQyxNQUFNLEdBQUcsQ0FBQzs7RUFHdkRPLEtBQVlBLENBQUNDLFdBQStCLEVBQVc7SUFDdEQsTUFBTVYsY0FBYyxHQUFHLElBQUksQ0FBQ0MsT0FBTyxDQUFDQyxNQUFNO0lBRTFDLElBQUksQ0FBQ0QsT0FBTyxHQUFHLElBQUFVLGlCQUFPLEVBQ3JCLElBQUksQ0FBQ1YsT0FBTyxDQUFDTyxNQUFNLENBQUMsSUFBSSxDQUFDSCxnQkFBZ0IsQ0FBQyxFQUMxQ0ssV0FBVyxDQUNYO0lBRUQsT0FBT1YsY0FBYyxHQUFHLENBQUMsSUFBSSxJQUFJLENBQUNDLE9BQU8sQ0FBQ0MsTUFBTSxLQUFLLENBQUM7O0VBR3ZEVSxLQUFZQSxDQUFBLEVBQVM7SUFDcEIsSUFBSSxDQUFDWCxPQUFPLEdBQUcsRUFBRTs7RUE1QmxCWSxZQUFtQlIsZ0JBQStCLEVBQUU7SUFIcEQsS0FBUUosT0FBTyxHQUFVLEVBQUU7SUFJMUIsSUFBSSxDQUFDSSxnQkFBZ0IsR0FBR0EsZ0JBQWdCOzs7QUE2QnpDUyxPQUFBLENBQUFqQixpQkFBQSxHQUFBQSxpQkFBQSJ9