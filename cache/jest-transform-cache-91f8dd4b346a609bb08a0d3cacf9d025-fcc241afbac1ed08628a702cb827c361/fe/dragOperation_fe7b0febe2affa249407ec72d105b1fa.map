{"version":3,"names":["_index","require","_registry","_js_utils","_defineProperty","obj","key","value","initialState","itemType","item","sourceId","targetIds","dropResult","didDrop","isSourcePublic","reduce","state","action","payload","type","BEGIN_DRAG","_objectSpread","PUBLISH_DRAG_SOURCE","HOVER","REMOVE_TARGET","indexOf","targetId","without","DROP","END_DRAG"],"sources":["../../src/reducers/dragOperation.ts"],"sourcesContent":["import {\n\tBEGIN_DRAG,\n\tDROP,\n\tEND_DRAG,\n\tHOVER,\n\tPUBLISH_DRAG_SOURCE,\n} from '../actions/dragDrop/index.js'\nimport { REMOVE_TARGET } from '../actions/registry.js'\nimport type { Action, Identifier } from '../interfaces.js'\nimport { without } from '../utils/js_utils.js'\n\nexport interface State {\n\titemType: Identifier | Identifier[] | null\n\titem: any\n\tsourceId: string | null\n\ttargetIds: string[]\n\tdropResult: any\n\tdidDrop: boolean\n\tisSourcePublic: boolean | null\n}\n\nconst initialState: State = {\n\titemType: null,\n\titem: null,\n\tsourceId: null,\n\ttargetIds: [],\n\tdropResult: null,\n\tdidDrop: false,\n\tisSourcePublic: null,\n}\n\nexport function reduce(\n\tstate: State = initialState,\n\taction: Action<{\n\t\titemType: Identifier | Identifier[]\n\t\titem: any\n\t\tsourceId: string\n\t\ttargetId: string\n\t\ttargetIds: string[]\n\t\tisSourcePublic: boolean\n\t\tdropResult: any\n\t}>,\n): State {\n\tconst { payload } = action\n\tswitch (action.type) {\n\t\tcase BEGIN_DRAG:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\titemType: payload.itemType,\n\t\t\t\titem: payload.item,\n\t\t\t\tsourceId: payload.sourceId,\n\t\t\t\tisSourcePublic: payload.isSourcePublic,\n\t\t\t\tdropResult: null,\n\t\t\t\tdidDrop: false,\n\t\t\t}\n\t\tcase PUBLISH_DRAG_SOURCE:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisSourcePublic: true,\n\t\t\t}\n\t\tcase HOVER:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttargetIds: payload.targetIds,\n\t\t\t}\n\t\tcase REMOVE_TARGET:\n\t\t\tif (state.targetIds.indexOf(payload.targetId) === -1) {\n\t\t\t\treturn state\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttargetIds: without(state.targetIds, payload.targetId),\n\t\t\t}\n\t\tcase DROP:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tdropResult: payload.dropResult,\n\t\t\t\tdidDrop: true,\n\t\t\t\ttargetIds: [],\n\t\t\t}\n\t\tcase END_DRAG:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\titemType: null,\n\t\t\t\titem: null,\n\t\t\t\tsourceId: null,\n\t\t\t\tdropResult: null,\n\t\t\t\tdidDrop: false,\n\t\t\t\tisSourcePublic: null,\n\t\t\t\ttargetIds: [],\n\t\t\t}\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAOA,IAAAC,SAAA,GAAAD,OAAA;AAEA,IAAAE,SAAA,GAAAF,OAAA;AATA,SAAAG,gBAAAC,GAAA,EAAAC,GAAA,EAAAC,KAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqBA,MAAMC,YAAY,GAAU;EAC3BC,QAAQ,EAAE,IAAI;EACdC,IAAI,EAAE,IAAI;EACVC,QAAQ,EAAE,IAAI;EACdC,SAAS,EAAE,EAAE;EACbC,UAAU,EAAE,IAAI;EAChBC,OAAO,EAAE,KAAK;EACdC,cAAc,EAAE;CAChB;AAEM,SAASC,MAAMA,CACrBC,KAAY,GAAGT,YAAY,EAC3BU,MAQE,EACM;EACR,MAAM;IAAEC;EAAO,CAAE,GAAGD,MAAM;EAC1B,QAAQA,MAAM,CAACE,IAAI;IAClB,KAAKC,iBAAU;MACd,OAAOC,aAAA,KACHL,KAAK;QACRR,QAAQ,EAAEU,OAAO,CAACV,QAAQ;QAC1BC,IAAI,EAAES,OAAO,CAACT,IAAI;QAClBC,QAAQ,EAAEQ,OAAO,CAACR,QAAQ;QAC1BI,cAAc,EAAEI,OAAO,CAACJ,cAAc;QACtCF,UAAU,EAAE,IAAI;QAChBC,OAAO,EAAE;QACT;IACF,KAAKS,0BAAmB;MACvB,OAAOD,aAAA,KACHL,KAAK;QACRF,cAAc,EAAE;QAChB;IACF,KAAKS,YAAK;MACT,OAAOF,aAAA,KACHL,KAAK;QACRL,SAAS,EAAEO,OAAO,CAACP;QACnB;IACF,KAAKa,uBAAa;MACjB,IAAIR,KAAK,CAACL,SAAS,CAACc,OAAO,CAACP,OAAO,CAACQ,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE;QACrD,OAAOV,KAAK;;MAEb,OAAOK,aAAA,KACHL,KAAK;QACRL,SAAS,EAAE,IAAAgB,iBAAO,EAACX,KAAK,CAACL,SAAS,EAAEO,OAAO,CAACQ,QAAQ;QACpD;IACF,KAAKE,WAAI;MACR,OAAOP,aAAA,KACHL,KAAK;QACRJ,UAAU,EAAEM,OAAO,CAACN,UAAU;QAC9BC,OAAO,EAAE,IAAI;QACbF,SAAS,EAAE;QACX;IACF,KAAKkB,eAAQ;MACZ,OAAOR,aAAA,KACHL,KAAK;QACRR,QAAQ,EAAE,IAAI;QACdC,IAAI,EAAE,IAAI;QACVC,QAAQ,EAAE,IAAI;QACdE,UAAU,EAAE,IAAI;QAChBC,OAAO,EAAE,KAAK;QACdC,cAAc,EAAE,IAAI;QACpBH,SAAS,EAAE;QACX;IACF;MACC,OAAOK,KAAK;EAAA"}