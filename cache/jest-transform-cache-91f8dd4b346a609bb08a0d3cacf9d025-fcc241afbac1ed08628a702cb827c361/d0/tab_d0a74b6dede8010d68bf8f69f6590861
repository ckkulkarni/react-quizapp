56634d18a467decd4f527c6bfd5840e1
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.tab = tab;
var _dom = require("@testing-library/dom");
var _utils = require("./utils");
var _focus = require("./focus");
var _blur = require("./blur");
function getNextElement(currentIndex, shift, elements, focusTrap) {
  if ((0, _utils.isDocument)(focusTrap) && (currentIndex === 0 && shift || currentIndex === elements.length - 1 && !shift)) {
    return focusTrap.body;
  }
  const nextIndex = shift ? currentIndex - 1 : currentIndex + 1;
  const defaultIndex = shift ? elements.length - 1 : 0;
  return elements[nextIndex] || elements[defaultIndex];
}
function tab({
  shift = false,
  focusTrap
} = {}) {
  var _focusTrap$ownerDocum, _focusTrap;
  const doc = (_focusTrap$ownerDocum = (_focusTrap = focusTrap) == null ? void 0 : _focusTrap.ownerDocument) != null ? _focusTrap$ownerDocum : document;
  const previousElement = (0, _utils.getActiveElement)(doc);
  if (!focusTrap) {
    focusTrap = doc;
  }
  const focusableElements = focusTrap.querySelectorAll(_utils.FOCUSABLE_SELECTOR);
  const enabledElements = Array.from(focusableElements).filter(el => el === previousElement || el.getAttribute('tabindex') !== '-1' && !(0, _utils.isDisabled)(el) &&
  // Hidden elements are not tabable
  (0, _utils.isVisible)(el));
  if (enabledElements.length === 0) return;
  const orderedElements = enabledElements.map((el, idx) => ({
    el,
    idx
  })).sort((a, b) => {
    // tabindex has no effect if the active element has tabindex="-1"
    if (previousElement && previousElement.getAttribute('tabindex') === '-1') {
      return a.idx - b.idx;
    }
    const tabIndexA = Number(a.el.getAttribute('tabindex'));
    const tabIndexB = Number(b.el.getAttribute('tabindex'));
    const diff = tabIndexA - tabIndexB;
    return diff === 0 ? a.idx - b.idx : diff;
  }).map(({
    el
  }) => el); // TODO: verify/remove type casts

  const checkedRadio = {};
  let prunedElements = [];
  orderedElements.forEach(currentElement => {
    // For radio groups keep only the active radio
    // If there is no active radio, keep only the checked radio
    // If there is no checked radio, treat like everything else
    const el = currentElement;
    if (el.type === 'radio' && el.name) {
      // If the active element is part of the group, add only that
      const prev = previousElement;
      if (prev && prev.type === el.type && prev.name === el.name) {
        if (el === prev) {
          prunedElements.push(el);
        }
        return;
      } // If we stumble upon a checked radio, remove the others

      if (el.checked) {
        prunedElements = prunedElements.filter(e => e.type !== el.type || e.name !== el.name);
        prunedElements.push(el);
        checkedRadio[el.name] = el;
        return;
      } // If we already found the checked one, skip

      if (typeof checkedRadio[el.name] !== 'undefined') {
        return;
      }
    }
    prunedElements.push(el);
  });
  const index = prunedElements.findIndex(el => el === previousElement);
  const nextElement = getNextElement(index, shift, prunedElements, focusTrap);
  const shiftKeyInit = {
    key: 'Shift',
    keyCode: 16,
    shiftKey: true
  };
  const tabKeyInit = {
    key: 'Tab',
    keyCode: 9,
    shiftKey: shift
  };
  let continueToTab = true; // not sure how to make it so there's no previous element...
  // istanbul ignore else

  if (previousElement) {
    // preventDefault on the shift key makes no difference
    if (shift) _dom.fireEvent.keyDown(previousElement, {
      ...shiftKeyInit
    });
    continueToTab = _dom.fireEvent.keyDown(previousElement, {
      ...tabKeyInit
    });
  }
  const keyUpTarget = !continueToTab && previousElement ? previousElement : nextElement;
  if (continueToTab) {
    if (nextElement === doc.body) {
      /* istanbul ignore else */
      if (previousElement) {
        (0, _blur.blur)(previousElement);
      }
    } else {
      (0, _focus.focus)(nextElement);
    }
  }
  _dom.fireEvent.keyUp(keyUpTarget, {
    ...tabKeyInit
  });
  if (shift) {
    _dom.fireEvent.keyUp(keyUpTarget, {
      ...shiftKeyInit,
      shiftKey: false
    });
  }
}
/*
eslint
  complexity: "off",
  max-statements: "off",
*/
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInRhYiIsIl9kb20iLCJyZXF1aXJlIiwiX3V0aWxzIiwiX2ZvY3VzIiwiX2JsdXIiLCJnZXROZXh0RWxlbWVudCIsImN1cnJlbnRJbmRleCIsInNoaWZ0IiwiZWxlbWVudHMiLCJmb2N1c1RyYXAiLCJpc0RvY3VtZW50IiwibGVuZ3RoIiwiYm9keSIsIm5leHRJbmRleCIsImRlZmF1bHRJbmRleCIsIl9mb2N1c1RyYXAkb3duZXJEb2N1bSIsIl9mb2N1c1RyYXAiLCJkb2MiLCJvd25lckRvY3VtZW50IiwiZG9jdW1lbnQiLCJwcmV2aW91c0VsZW1lbnQiLCJnZXRBY3RpdmVFbGVtZW50IiwiZm9jdXNhYmxlRWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiRk9DVVNBQkxFX1NFTEVDVE9SIiwiZW5hYmxlZEVsZW1lbnRzIiwiQXJyYXkiLCJmcm9tIiwiZmlsdGVyIiwiZWwiLCJnZXRBdHRyaWJ1dGUiLCJpc0Rpc2FibGVkIiwiaXNWaXNpYmxlIiwib3JkZXJlZEVsZW1lbnRzIiwibWFwIiwiaWR4Iiwic29ydCIsImEiLCJiIiwidGFiSW5kZXhBIiwiTnVtYmVyIiwidGFiSW5kZXhCIiwiZGlmZiIsImNoZWNrZWRSYWRpbyIsInBydW5lZEVsZW1lbnRzIiwiZm9yRWFjaCIsImN1cnJlbnRFbGVtZW50IiwidHlwZSIsIm5hbWUiLCJwcmV2IiwicHVzaCIsImNoZWNrZWQiLCJlIiwiaW5kZXgiLCJmaW5kSW5kZXgiLCJuZXh0RWxlbWVudCIsInNoaWZ0S2V5SW5pdCIsImtleSIsImtleUNvZGUiLCJzaGlmdEtleSIsInRhYktleUluaXQiLCJjb250aW51ZVRvVGFiIiwiZmlyZUV2ZW50Iiwia2V5RG93biIsImtleVVwVGFyZ2V0IiwiYmx1ciIsImZvY3VzIiwia2V5VXAiXSwic291cmNlcyI6WyJ0YWIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLnRhYiA9IHRhYjtcblxudmFyIF9kb20gPSByZXF1aXJlKFwiQHRlc3RpbmctbGlicmFyeS9kb21cIik7XG5cbnZhciBfdXRpbHMgPSByZXF1aXJlKFwiLi91dGlsc1wiKTtcblxudmFyIF9mb2N1cyA9IHJlcXVpcmUoXCIuL2ZvY3VzXCIpO1xuXG52YXIgX2JsdXIgPSByZXF1aXJlKFwiLi9ibHVyXCIpO1xuXG5mdW5jdGlvbiBnZXROZXh0RWxlbWVudChjdXJyZW50SW5kZXgsIHNoaWZ0LCBlbGVtZW50cywgZm9jdXNUcmFwKSB7XG4gIGlmICgoMCwgX3V0aWxzLmlzRG9jdW1lbnQpKGZvY3VzVHJhcCkgJiYgKGN1cnJlbnRJbmRleCA9PT0gMCAmJiBzaGlmdCB8fCBjdXJyZW50SW5kZXggPT09IGVsZW1lbnRzLmxlbmd0aCAtIDEgJiYgIXNoaWZ0KSkge1xuICAgIHJldHVybiBmb2N1c1RyYXAuYm9keTtcbiAgfVxuXG4gIGNvbnN0IG5leHRJbmRleCA9IHNoaWZ0ID8gY3VycmVudEluZGV4IC0gMSA6IGN1cnJlbnRJbmRleCArIDE7XG4gIGNvbnN0IGRlZmF1bHRJbmRleCA9IHNoaWZ0ID8gZWxlbWVudHMubGVuZ3RoIC0gMSA6IDA7XG4gIHJldHVybiBlbGVtZW50c1tuZXh0SW5kZXhdIHx8IGVsZW1lbnRzW2RlZmF1bHRJbmRleF07XG59XG5cbmZ1bmN0aW9uIHRhYih7XG4gIHNoaWZ0ID0gZmFsc2UsXG4gIGZvY3VzVHJhcFxufSA9IHt9KSB7XG4gIHZhciBfZm9jdXNUcmFwJG93bmVyRG9jdW0sIF9mb2N1c1RyYXA7XG5cbiAgY29uc3QgZG9jID0gKF9mb2N1c1RyYXAkb3duZXJEb2N1bSA9IChfZm9jdXNUcmFwID0gZm9jdXNUcmFwKSA9PSBudWxsID8gdm9pZCAwIDogX2ZvY3VzVHJhcC5vd25lckRvY3VtZW50KSAhPSBudWxsID8gX2ZvY3VzVHJhcCRvd25lckRvY3VtIDogZG9jdW1lbnQ7XG4gIGNvbnN0IHByZXZpb3VzRWxlbWVudCA9ICgwLCBfdXRpbHMuZ2V0QWN0aXZlRWxlbWVudCkoZG9jKTtcblxuICBpZiAoIWZvY3VzVHJhcCkge1xuICAgIGZvY3VzVHJhcCA9IGRvYztcbiAgfVxuXG4gIGNvbnN0IGZvY3VzYWJsZUVsZW1lbnRzID0gZm9jdXNUcmFwLnF1ZXJ5U2VsZWN0b3JBbGwoX3V0aWxzLkZPQ1VTQUJMRV9TRUxFQ1RPUik7XG4gIGNvbnN0IGVuYWJsZWRFbGVtZW50cyA9IEFycmF5LmZyb20oZm9jdXNhYmxlRWxlbWVudHMpLmZpbHRlcihlbCA9PiBlbCA9PT0gcHJldmlvdXNFbGVtZW50IHx8IGVsLmdldEF0dHJpYnV0ZSgndGFiaW5kZXgnKSAhPT0gJy0xJyAmJiAhKDAsIF91dGlscy5pc0Rpc2FibGVkKShlbCkgJiYgLy8gSGlkZGVuIGVsZW1lbnRzIGFyZSBub3QgdGFiYWJsZVxuICAoMCwgX3V0aWxzLmlzVmlzaWJsZSkoZWwpKTtcbiAgaWYgKGVuYWJsZWRFbGVtZW50cy5sZW5ndGggPT09IDApIHJldHVybjtcbiAgY29uc3Qgb3JkZXJlZEVsZW1lbnRzID0gZW5hYmxlZEVsZW1lbnRzLm1hcCgoZWwsIGlkeCkgPT4gKHtcbiAgICBlbCxcbiAgICBpZHhcbiAgfSkpLnNvcnQoKGEsIGIpID0+IHtcbiAgICAvLyB0YWJpbmRleCBoYXMgbm8gZWZmZWN0IGlmIHRoZSBhY3RpdmUgZWxlbWVudCBoYXMgdGFiaW5kZXg9XCItMVwiXG4gICAgaWYgKHByZXZpb3VzRWxlbWVudCAmJiBwcmV2aW91c0VsZW1lbnQuZ2V0QXR0cmlidXRlKCd0YWJpbmRleCcpID09PSAnLTEnKSB7XG4gICAgICByZXR1cm4gYS5pZHggLSBiLmlkeDtcbiAgICB9XG5cbiAgICBjb25zdCB0YWJJbmRleEEgPSBOdW1iZXIoYS5lbC5nZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JykpO1xuICAgIGNvbnN0IHRhYkluZGV4QiA9IE51bWJlcihiLmVsLmdldEF0dHJpYnV0ZSgndGFiaW5kZXgnKSk7XG4gICAgY29uc3QgZGlmZiA9IHRhYkluZGV4QSAtIHRhYkluZGV4QjtcbiAgICByZXR1cm4gZGlmZiA9PT0gMCA/IGEuaWR4IC0gYi5pZHggOiBkaWZmO1xuICB9KS5tYXAoKHtcbiAgICBlbFxuICB9KSA9PiBlbCk7IC8vIFRPRE86IHZlcmlmeS9yZW1vdmUgdHlwZSBjYXN0c1xuXG4gIGNvbnN0IGNoZWNrZWRSYWRpbyA9IHt9O1xuICBsZXQgcHJ1bmVkRWxlbWVudHMgPSBbXTtcbiAgb3JkZXJlZEVsZW1lbnRzLmZvckVhY2goY3VycmVudEVsZW1lbnQgPT4ge1xuICAgIC8vIEZvciByYWRpbyBncm91cHMga2VlcCBvbmx5IHRoZSBhY3RpdmUgcmFkaW9cbiAgICAvLyBJZiB0aGVyZSBpcyBubyBhY3RpdmUgcmFkaW8sIGtlZXAgb25seSB0aGUgY2hlY2tlZCByYWRpb1xuICAgIC8vIElmIHRoZXJlIGlzIG5vIGNoZWNrZWQgcmFkaW8sIHRyZWF0IGxpa2UgZXZlcnl0aGluZyBlbHNlXG4gICAgY29uc3QgZWwgPSBjdXJyZW50RWxlbWVudDtcblxuICAgIGlmIChlbC50eXBlID09PSAncmFkaW8nICYmIGVsLm5hbWUpIHtcbiAgICAgIC8vIElmIHRoZSBhY3RpdmUgZWxlbWVudCBpcyBwYXJ0IG9mIHRoZSBncm91cCwgYWRkIG9ubHkgdGhhdFxuICAgICAgY29uc3QgcHJldiA9IHByZXZpb3VzRWxlbWVudDtcblxuICAgICAgaWYgKHByZXYgJiYgcHJldi50eXBlID09PSBlbC50eXBlICYmIHByZXYubmFtZSA9PT0gZWwubmFtZSkge1xuICAgICAgICBpZiAoZWwgPT09IHByZXYpIHtcbiAgICAgICAgICBwcnVuZWRFbGVtZW50cy5wdXNoKGVsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gSWYgd2Ugc3R1bWJsZSB1cG9uIGEgY2hlY2tlZCByYWRpbywgcmVtb3ZlIHRoZSBvdGhlcnNcblxuXG4gICAgICBpZiAoZWwuY2hlY2tlZCkge1xuICAgICAgICBwcnVuZWRFbGVtZW50cyA9IHBydW5lZEVsZW1lbnRzLmZpbHRlcihlID0+IGUudHlwZSAhPT0gZWwudHlwZSB8fCBlLm5hbWUgIT09IGVsLm5hbWUpO1xuICAgICAgICBwcnVuZWRFbGVtZW50cy5wdXNoKGVsKTtcbiAgICAgICAgY2hlY2tlZFJhZGlvW2VsLm5hbWVdID0gZWw7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gSWYgd2UgYWxyZWFkeSBmb3VuZCB0aGUgY2hlY2tlZCBvbmUsIHNraXBcblxuXG4gICAgICBpZiAodHlwZW9mIGNoZWNrZWRSYWRpb1tlbC5uYW1lXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIHBydW5lZEVsZW1lbnRzLnB1c2goZWwpO1xuICB9KTtcbiAgY29uc3QgaW5kZXggPSBwcnVuZWRFbGVtZW50cy5maW5kSW5kZXgoZWwgPT4gZWwgPT09IHByZXZpb3VzRWxlbWVudCk7XG4gIGNvbnN0IG5leHRFbGVtZW50ID0gZ2V0TmV4dEVsZW1lbnQoaW5kZXgsIHNoaWZ0LCBwcnVuZWRFbGVtZW50cywgZm9jdXNUcmFwKTtcbiAgY29uc3Qgc2hpZnRLZXlJbml0ID0ge1xuICAgIGtleTogJ1NoaWZ0JyxcbiAgICBrZXlDb2RlOiAxNixcbiAgICBzaGlmdEtleTogdHJ1ZVxuICB9O1xuICBjb25zdCB0YWJLZXlJbml0ID0ge1xuICAgIGtleTogJ1RhYicsXG4gICAga2V5Q29kZTogOSxcbiAgICBzaGlmdEtleTogc2hpZnRcbiAgfTtcbiAgbGV0IGNvbnRpbnVlVG9UYWIgPSB0cnVlOyAvLyBub3Qgc3VyZSBob3cgdG8gbWFrZSBpdCBzbyB0aGVyZSdzIG5vIHByZXZpb3VzIGVsZW1lbnQuLi5cbiAgLy8gaXN0YW5idWwgaWdub3JlIGVsc2VcblxuICBpZiAocHJldmlvdXNFbGVtZW50KSB7XG4gICAgLy8gcHJldmVudERlZmF1bHQgb24gdGhlIHNoaWZ0IGtleSBtYWtlcyBubyBkaWZmZXJlbmNlXG4gICAgaWYgKHNoaWZ0KSBfZG9tLmZpcmVFdmVudC5rZXlEb3duKHByZXZpb3VzRWxlbWVudCwgeyAuLi5zaGlmdEtleUluaXRcbiAgICB9KTtcbiAgICBjb250aW51ZVRvVGFiID0gX2RvbS5maXJlRXZlbnQua2V5RG93bihwcmV2aW91c0VsZW1lbnQsIHsgLi4udGFiS2V5SW5pdFxuICAgIH0pO1xuICB9XG5cbiAgY29uc3Qga2V5VXBUYXJnZXQgPSAhY29udGludWVUb1RhYiAmJiBwcmV2aW91c0VsZW1lbnQgPyBwcmV2aW91c0VsZW1lbnQgOiBuZXh0RWxlbWVudDtcblxuICBpZiAoY29udGludWVUb1RhYikge1xuICAgIGlmIChuZXh0RWxlbWVudCA9PT0gZG9jLmJvZHkpIHtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gICAgICBpZiAocHJldmlvdXNFbGVtZW50KSB7XG4gICAgICAgICgwLCBfYmx1ci5ibHVyKShwcmV2aW91c0VsZW1lbnQpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAoMCwgX2ZvY3VzLmZvY3VzKShuZXh0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgX2RvbS5maXJlRXZlbnQua2V5VXAoa2V5VXBUYXJnZXQsIHsgLi4udGFiS2V5SW5pdFxuICB9KTtcblxuICBpZiAoc2hpZnQpIHtcbiAgICBfZG9tLmZpcmVFdmVudC5rZXlVcChrZXlVcFRhcmdldCwgeyAuLi5zaGlmdEtleUluaXQsXG4gICAgICBzaGlmdEtleTogZmFsc2VcbiAgICB9KTtcbiAgfVxufVxuLypcbmVzbGludFxuICBjb21wbGV4aXR5OiBcIm9mZlwiLFxuICBtYXgtc3RhdGVtZW50czogXCJvZmZcIixcbiovIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUVaQSxNQUFNLENBQUNDLGNBQWMsQ0FBQ0MsT0FBTyxFQUFFLFlBQVksRUFBRTtFQUMzQ0MsS0FBSyxFQUFFO0FBQ1QsQ0FBQyxDQUFDO0FBQ0ZELE9BQU8sQ0FBQ0UsR0FBRyxHQUFHQSxH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