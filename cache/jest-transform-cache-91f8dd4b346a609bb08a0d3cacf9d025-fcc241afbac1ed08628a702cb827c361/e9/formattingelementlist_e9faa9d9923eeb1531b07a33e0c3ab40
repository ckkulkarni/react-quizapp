6298100d54c4ca7d7914254299796bae
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.FormattingElementList = exports.EntryType = void 0;
//Const
const NOAH_ARK_CAPACITY = 3;
var EntryType;
(function (EntryType) {
  EntryType[EntryType["Marker"] = 0] = "Marker";
  EntryType[EntryType["Element"] = 1] = "Element";
})(EntryType = exports.EntryType || (exports.EntryType = {}));
const MARKER = {
  type: EntryType.Marker
};
//List of formatting elements
class FormattingElementList {
  constructor(treeAdapter) {
    this.treeAdapter = treeAdapter;
    this.entries = [];
    this.bookmark = null;
  }
  //Noah Ark's condition
  //OPTIMIZATION: at first we try to find possible candidates for exclusion using
  //lightweight heuristics without thorough attributes check.
  _getNoahArkConditionCandidates(newElement, neAttrs) {
    const candidates = [];
    const neAttrsLength = neAttrs.length;
    const neTagName = this.treeAdapter.getTagName(newElement);
    const neNamespaceURI = this.treeAdapter.getNamespaceURI(newElement);
    for (let i = 0; i < this.entries.length; i++) {
      const entry = this.entries[i];
      if (entry.type === EntryType.Marker) {
        break;
      }
      const {
        element
      } = entry;
      if (this.treeAdapter.getTagName(element) === neTagName && this.treeAdapter.getNamespaceURI(element) === neNamespaceURI) {
        const elementAttrs = this.treeAdapter.getAttrList(element);
        if (elementAttrs.length === neAttrsLength) {
          candidates.push({
            idx: i,
            attrs: elementAttrs
          });
        }
      }
    }
    return candidates;
  }
  _ensureNoahArkCondition(newElement) {
    if (this.entries.length < NOAH_ARK_CAPACITY) return;
    const neAttrs = this.treeAdapter.getAttrList(newElement);
    const candidates = this._getNoahArkConditionCandidates(newElement, neAttrs);
    if (candidates.length < NOAH_ARK_CAPACITY) return;
    //NOTE: build attrs map for the new element, so we can perform fast lookups
    const neAttrsMap = new Map(neAttrs.map(neAttr => [neAttr.name, neAttr.value]));
    let validCandidates = 0;
    //NOTE: remove bottommost candidates, until Noah's Ark condition will not be met
    for (let i = 0; i < candidates.length; i++) {
      const candidate = candidates[i];
      // We know that `candidate.attrs.length === neAttrs.length`
      if (candidate.attrs.every(cAttr => neAttrsMap.get(cAttr.name) === cAttr.value)) {
        validCandidates += 1;
        if (validCandidates >= NOAH_ARK_CAPACITY) {
          this.entries.splice(candidate.idx, 1);
        }
      }
    }
  }
  //Mutations
  insertMarker() {
    this.entries.unshift(MARKER);
  }
  pushElement(element, token) {
    this._ensureNoahArkCondition(element);
    this.entries.unshift({
      type: EntryType.Element,
      element,
      token
    });
  }
  insertElementAfterBookmark(element, token) {
    const bookmarkIdx = this.entries.indexOf(this.bookmark);
    this.entries.splice(bookmarkIdx, 0, {
      type: EntryType.Element,
      element,
      token
    });
  }
  removeEntry(entry) {
    const entryIndex = this.entries.indexOf(entry);
    if (entryIndex >= 0) {
      this.entries.splice(entryIndex, 1);
    }
  }
  /**
   * Clears the list of formatting elements up to the last marker.
   *
   * @see https://html.spec.whatwg.org/multipage/parsing.html#clear-the-list-of-active-formatting-elements-up-to-the-last-marker
   */
  clearToLastMarker() {
    const markerIdx = this.entries.indexOf(MARKER);
    if (markerIdx >= 0) {
      this.entries.splice(0, markerIdx + 1);
    } else {
      this.entries.length = 0;
    }
  }
  //Search
  getElementEntryInScopeWithTagName(tagName) {
    const entry = this.entries.find(entry => entry.type === EntryType.Marker || this.treeAdapter.getTagName(entry.element) === tagName);
    return entry && entry.type === EntryType.Element ? entry : null;
  }
  getElementEntry(element) {
    return this.entries.find(entry => entry.type === EntryType.Element && entry.element === element);
  }
}
exports.FormattingElementList = FormattingElementList;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkZvcm1hdHRpbmdFbGVtZW50TGlzdCIsIkVudHJ5VHlwZSIsIk5PQUhfQVJLX0NBUEFDSVRZIiwiTUFSS0VSIiwidHlwZSIsIk1hcmtlciIsImNvbnN0cnVjdG9yIiwidHJlZUFkYXB0ZXIiLCJlbnRyaWVzIiwiYm9va21hcmsiLCJfZ2V0Tm9haEFya0NvbmRpdGlvbkNhbmRpZGF0ZXMiLCJuZXdFbGVtZW50IiwibmVBdHRycyIsImNhbmRpZGF0ZXMiLCJuZUF0dHJzTGVuZ3RoIiwibGVuZ3RoIiwibmVUYWdOYW1lIiwiZ2V0VGFnTmFtZSIsIm5lTmFtZXNwYWNlVVJJIiwiZ2V0TmFtZXNwYWNlVVJJIiwiaSIsImVudHJ5IiwiZWxlbWVudCIsImVsZW1lbnRBdHRycyIsImdldEF0dHJMaXN0IiwicHVzaCIsImlkeCIsImF0dHJzIiwiX2Vuc3VyZU5vYWhBcmtDb25kaXRpb24iLCJuZUF0dHJzTWFwIiwiTWFwIiwibWFwIiwibmVBdHRyIiwibmFtZSIsInZhbGlkQ2FuZGlkYXRlcyIsImNhbmRpZGF0ZSIsImV2ZXJ5IiwiY0F0dHIiLCJnZXQiLCJzcGxpY2UiLCJpbnNlcnRNYXJrZXIiLCJ1bnNoaWZ0IiwicHVzaEVsZW1lbnQiLCJ0b2tlbiIsIkVsZW1lbnQiLCJpbnNlcnRFbGVtZW50QWZ0ZXJCb29rbWFyayIsImJvb2ttYXJrSWR4IiwiaW5kZXhPZiIsInJlbW92ZUVudHJ5IiwiZW50cnlJbmRleCIsImNsZWFyVG9MYXN0TWFya2VyIiwibWFya2VySWR4IiwiZ2V0RWxlbWVudEVudHJ5SW5TY29wZVdpdGhUYWdOYW1lIiwidGFnTmFtZSIsImZpbmQiLCJnZXRFbGVtZW50RW50cnkiXSwic291cmNlcyI6WyJmb3JtYXR0aW5nLWVsZW1lbnQtbGlzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuRm9ybWF0dGluZ0VsZW1lbnRMaXN0ID0gZXhwb3J0cy5FbnRyeVR5cGUgPSB2b2lkIDA7XG4vL0NvbnN0XG5jb25zdCBOT0FIX0FSS19DQVBBQ0lUWSA9IDM7XG52YXIgRW50cnlUeXBlO1xuKGZ1bmN0aW9uIChFbnRyeVR5cGUpIHtcbiAgICBFbnRyeVR5cGVbRW50cnlUeXBlW1wiTWFya2VyXCJdID0gMF0gPSBcIk1hcmtlclwiO1xuICAgIEVudHJ5VHlwZVtFbnRyeVR5cGVbXCJFbGVtZW50XCJdID0gMV0gPSBcIkVsZW1lbnRcIjtcbn0pKEVudHJ5VHlwZSA9IGV4cG9ydHMuRW50cnlUeXBlIHx8IChleHBvcnRzLkVudHJ5VHlwZSA9IHt9KSk7XG5jb25zdCBNQVJLRVIgPSB7IHR5cGU6IEVudHJ5VHlwZS5NYXJrZXIgfTtcbi8vTGlzdCBvZiBmb3JtYXR0aW5nIGVsZW1lbnRzXG5jbGFzcyBGb3JtYXR0aW5nRWxlbWVudExpc3Qge1xuICAgIGNvbnN0cnVjdG9yKHRyZWVBZGFwdGVyKSB7XG4gICAgICAgIHRoaXMudHJlZUFkYXB0ZXIgPSB0cmVlQWRhcHRlcjtcbiAgICAgICAgdGhpcy5lbnRyaWVzID0gW107XG4gICAgICAgIHRoaXMuYm9va21hcmsgPSBudWxsO1xuICAgIH1cbiAgICAvL05vYWggQXJrJ3MgY29uZGl0aW9uXG4gICAgLy9PUFRJTUlaQVRJT046IGF0IGZpcnN0IHdlIHRyeSB0byBmaW5kIHBvc3NpYmxlIGNhbmRpZGF0ZXMgZm9yIGV4Y2x1c2lvbiB1c2luZ1xuICAgIC8vbGlnaHR3ZWlnaHQgaGV1cmlzdGljcyB3aXRob3V0IHRob3JvdWdoIGF0dHJpYnV0ZXMgY2hlY2suXG4gICAgX2dldE5vYWhBcmtDb25kaXRpb25DYW5kaWRhdGVzKG5ld0VsZW1lbnQsIG5lQXR0cnMpIHtcbiAgICAgICAgY29uc3QgY2FuZGlkYXRlcyA9IFtdO1xuICAgICAgICBjb25zdCBuZUF0dHJzTGVuZ3RoID0gbmVBdHRycy5sZW5ndGg7XG4gICAgICAgIGNvbnN0IG5lVGFnTmFtZSA9IHRoaXMudHJlZUFkYXB0ZXIuZ2V0VGFnTmFtZShuZXdFbGVtZW50KTtcbiAgICAgICAgY29uc3QgbmVOYW1lc3BhY2VVUkkgPSB0aGlzLnRyZWVBZGFwdGVyLmdldE5hbWVzcGFjZVVSSShuZXdFbGVtZW50KTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmVudHJpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5lbnRyaWVzW2ldO1xuICAgICAgICAgICAgaWYgKGVudHJ5LnR5cGUgPT09IEVudHJ5VHlwZS5NYXJrZXIpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHsgZWxlbWVudCB9ID0gZW50cnk7XG4gICAgICAgICAgICBpZiAodGhpcy50cmVlQWRhcHRlci5nZXRUYWdOYW1lKGVsZW1lbnQpID09PSBuZVRhZ05hbWUgJiZcbiAgICAgICAgICAgICAgICB0aGlzLnRyZWVBZGFwdGVyLmdldE5hbWVzcGFjZVVSSShlbGVtZW50KSA9PT0gbmVOYW1lc3BhY2VVUkkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50QXR0cnMgPSB0aGlzLnRyZWVBZGFwdGVyLmdldEF0dHJMaXN0KGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50QXR0cnMubGVuZ3RoID09PSBuZUF0dHJzTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZXMucHVzaCh7IGlkeDogaSwgYXR0cnM6IGVsZW1lbnRBdHRycyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNhbmRpZGF0ZXM7XG4gICAgfVxuICAgIF9lbnN1cmVOb2FoQXJrQ29uZGl0aW9uKG5ld0VsZW1lbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuZW50cmllcy5sZW5ndGggPCBOT0FIX0FSS19DQVBBQ0lUWSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgbmVBdHRycyA9IHRoaXMudHJlZUFkYXB0ZXIuZ2V0QXR0ckxpc3QobmV3RWxlbWVudCk7XG4gICAgICAgIGNvbnN0IGNhbmRpZGF0ZXMgPSB0aGlzLl9nZXROb2FoQXJrQ29uZGl0aW9uQ2FuZGlkYXRlcyhuZXdFbGVtZW50LCBuZUF0dHJzKTtcbiAgICAgICAgaWYgKGNhbmRpZGF0ZXMubGVuZ3RoIDwgTk9BSF9BUktfQ0FQQUNJVFkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIC8vTk9URTogYnVpbGQgYXR0cnMgbWFwIGZvciB0aGUgbmV3IGVsZW1lbnQsIHNvIHdlIGNhbiBwZXJmb3JtIGZhc3QgbG9va3Vwc1xuICAgICAgICBjb25zdCBuZUF0dHJzTWFwID0gbmV3IE1hcChuZUF0dHJzLm1hcCgobmVBdHRyKSA9PiBbbmVBdHRyLm5hbWUsIG5lQXR0ci52YWx1ZV0pKTtcbiAgICAgICAgbGV0IHZhbGlkQ2FuZGlkYXRlcyA9IDA7XG4gICAgICAgIC8vTk9URTogcmVtb3ZlIGJvdHRvbW1vc3QgY2FuZGlkYXRlcywgdW50aWwgTm9haCdzIEFyayBjb25kaXRpb24gd2lsbCBub3QgYmUgbWV0XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2FuZGlkYXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgY2FuZGlkYXRlID0gY2FuZGlkYXRlc1tpXTtcbiAgICAgICAgICAgIC8vIFdlIGtub3cgdGhhdCBgY2FuZGlkYXRlLmF0dHJzLmxlbmd0aCA9PT0gbmVBdHRycy5sZW5ndGhgXG4gICAgICAgICAgICBpZiAoY2FuZGlkYXRlLmF0dHJzLmV2ZXJ5KChjQXR0cikgPT4gbmVBdHRyc01hcC5nZXQoY0F0dHIubmFtZSkgPT09IGNBdHRyLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHZhbGlkQ2FuZGlkYXRlcyArPSAxO1xuICAgICAgICAgICAgICAgIGlmICh2YWxpZENhbmRpZGF0ZXMgPj0gTk9BSF9BUktfQ0FQQUNJVFkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbnRyaWVzLnNwbGljZShjYW5kaWRhdGUuaWR4LCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy9NdXRhdGlvbnNcbiAgICBpbnNlcnRNYXJrZXIoKSB7XG4gICAgICAgIHRoaXMuZW50cmllcy51bnNoaWZ0KE1BUktFUik7XG4gICAgfVxuICAgIHB1c2hFbGVtZW50KGVsZW1lbnQsIHRva2VuKSB7XG4gICAgICAgIHRoaXMuX2Vuc3VyZU5vYWhBcmtDb25kaXRpb24oZWxlbWVudCk7XG4gICAgICAgIHRoaXMuZW50cmllcy51bnNoaWZ0KHtcbiAgICAgICAgICAgIHR5cGU6IEVudHJ5VHlwZS5FbGVtZW50LFxuICAgICAgICAgICAgZWxlbWVudCxcbiAgICAgICAgICAgIHRva2VuLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaW5zZXJ0RWxlbWVudEFmdGVyQm9va21hcmsoZWxlbWVudCwgdG9rZW4pIHtcbiAgICAgICAgY29uc3QgYm9va21hcmtJZHggPSB0aGlzLmVudHJpZXMuaW5kZXhPZih0aGlzLmJvb2ttYXJrKTtcbiAgICAgICAgdGhpcy5lbnRyaWVzLnNwbGljZShib29rbWFya0lkeCwgMCwge1xuICAgICAgICAgICAgdHlwZTogRW50cnlUeXBlLkVsZW1lbnQsXG4gICAgICAgICAgICBlbGVtZW50LFxuICAgICAgICAgICAgdG9rZW4sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZW1vdmVFbnRyeShlbnRyeSkge1xuICAgICAgICBjb25zdCBlbnRyeUluZGV4ID0gdGhpcy5lbnRyaWVzLmluZGV4T2YoZW50cnkpO1xuICAgICAgICBpZiAoZW50cnlJbmRleCA+PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmVudHJpZXMuc3BsaWNlKGVudHJ5SW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFycyB0aGUgbGlzdCBvZiBmb3JtYXR0aW5nIGVsZW1lbnRzIHVwIHRvIHRoZSBsYXN0IG1hcmtlci5cbiAgICAgKlxuICAgICAqIEBzZWUgaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvcGFyc2luZy5odG1sI2NsZWFyLXRoZS1saXN0LW9mLWFjdGl2ZS1mb3JtYXR0aW5nLWVsZW1lbnRzLXVwLXRvLXRoZS1sYXN0LW1hcmtlclxuICAgICAqL1xuICAgIGNsZWFyVG9MYXN0TWFya2VyKCkge1xuICAgICAgICBjb25zdCBtYXJrZXJJZHggPSB0aGlzLmVudHJpZXMuaW5kZXhPZihNQVJLRVIpO1xuICAgICAgICBpZiAobWFya2VySWR4ID49IDApIHtcbiAgICAgICAgICAgIHRoaXMuZW50cmllcy5zcGxpY2UoMCwgbWFya2VySWR4ICsgMSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmVudHJpZXMubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvL1NlYXJjaFxuICAgIGdldEVsZW1lbnRFbnRyeUluU2NvcGVXaXRoVGFnTmFtZSh0YWdOYW1lKSB7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5lbnRyaWVzLmZpbmQoKGVudHJ5KSA9PiBlbnRyeS50eXBlID09PSBFbnRyeVR5cGUuTWFya2VyIHx8IHRoaXMudHJlZUFkYXB0ZXIuZ2V0VGFnTmFtZShlbnRyeS5lbGVtZW50KSA9PT0gdGFnTmFtZSk7XG4gICAgICAgIHJldHVybiBlbnRyeSAmJiBlbnRyeS50eXBlID09PSBFbnRyeVR5cGUuRWxlbWVudCA/IGVudHJ5IDogbnVsbDtcbiAgICB9XG4gICAgZ2V0RWxlbWVudEVudHJ5KGVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW50cmllcy5maW5kKChlbnRyeSkgPT4gZW50cnkudHlwZSA9PT0gRW50cnlUeXBlLkVsZW1lbnQgJiYgZW50cnkuZWxlbWVudCA9PT0gZWxlbWVudCk7XG4gICAgfVxufVxuZXhwb3J0cy5Gb3JtYXR0aW5nRWxlbWVudExpc3QgPSBGb3JtYXR0aW5nRWxlbWVudExpc3Q7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mb3JtYXR0aW5nLWVsZW1lbnQtbGlzdC5qcy5tYXAiXSwibWFwcGluZ3MiOiJBQUFBLFlBQVk7O0FBQ1pBLE1BQU0sQ0FBQ0MsY0FBYyxDQUFDQyxPQUFPLEVBQUUsWUFBWSxFQUFFO0VBQUVDLEtBQUssRUFBRTtBQUFLLENBQUMsQ0FBQztBQUM3REQsT0FBTyxDQUFDRSxxQkFBcUIsR0FBR0YsT0FBTyxDQUFDRyxTQUFTLEdBQUcsS0FBSyxDQUFDO0FBQzFEO0FBQ0EsTUFBTUMsaUJBQWlCLEdBQUcsQ0FBQztBQUMzQixJQUFJRCxTQUFTO0FBQ2IsQ0FBQyxVQUFVQSxTQUFTLEVBQUU7RUFDbEJBLFNBQVMsQ0FBQ0EsU0FBUyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLFFBQVE7RUFDN0NBLFNBQVMsQ0FBQ0EsU0FBUyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLFNBQVM7QUFDbkQsQ0FBQyxFQUFFQSxTQUFTLEdBQUdILE9BQU8sQ0FBQ0csU0FBUyxLQUFLSCxPQUFPLENBQUNHLFNBQVMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzdELE1BQU1FLE1BQU0sR0FBRztFQUFFQyxJQUFJLEVBQUVILFNBQVMsQ0FBQ0k7QUFBTyxDQUFDO0FBQ3pDO0FBQ0EsTUFBTUwscUJBQXFCLENBQUM7RUFDeEJNLFdBQVdBLENBQUNDLFdBQVcsRUFBRTtJQUNyQixJQUFJLENBQUNBLFdBQVcsR0FBR0EsV0FBVztJQUM5QixJQUFJLENBQUNDLE9BQU8sR0FBRyxFQUFFO0lBQ2pCLElBQUksQ0FBQ0MsUUFBUSxHQUFHLElBQUk7RUFDeEI7RUFDQTtFQUNBO0VBQ0E7RUFDQUMsOEJBQThCQSxDQUFDQyxVQUFVLEVBQUVDLE9BQU8sRUFBRTtJQUNoRCxNQUFNQyxVQUFVLEdBQUcsRUFBRTtJQUNy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