{"version":3,"names":["_EnterLeaveCounter","require","_index","NativeTypes","_interopRequireWildcard","_OffsetUtils","_OptionsReader","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_defineProperty","value","HTML5BackendImpl","profile","ref","ref1","sourcePreviewNodes","size","sourcePreviewNodeOptions","sourceNodeOptions","sourceNodes","dragStartSourceIds","length","dropTargetIds","dragEnterTargetIds","dragOverTargetIds","window","options","document","rootElement","setup","root","undefined","__isReactDndBackendSetUp","Error","addEventListeners","teardown","removeEventListeners","clearCurrentDragSourceNode","asyncEndDragFrameId","cancelAnimationFrame","connectDragPreview","sourceId","node","delete","connectDragSource","handleDragStart","e","handleSelectStart","setAttribute","addEventListener","removeEventListener","connectDropTarget","targetId","handleDragEnter","handleDragOver","handleDrop","target","handleTopDragStart","handleTopDragStartCapture","handleTopDragEndCapture","handleTopDragEnter","handleTopDragEnterCapture","handleTopDragLeaveCapture","handleTopDragOver","handleTopDragOverCapture","handleTopDrop","handleTopDropCapture","getCurrentSourceNodeOptions","monitor","getSourceId","_objectSpread","dropEffect","altKeyPressed","getCurrentDropEffect","isDraggingNativeItem","getCurrentSourcePreviewNodeOptions","anchorX","anchorY","captureDraggingState","itemType","getItemType","keys","some","beginDragNativeItem","type","dataTransfer","currentNativeSource","createNativeDragSource","currentNativeHandle","registry","addSource","actions","beginDrag","setCurrentDragSourceNode","currentDragSourceNode","MOUSE_MOVE_TIMEOUT","mouseMoveTimeoutTimer","setTimeout","endDragIfSourceWasRemovedFromDOM","clearTimeout","defaultPrevented","unshift","_e","constructor","manager","globalContext","Map","lastClientOffset","hoverRafId","getSourceClientOffset","source","getNodeClientOffset","endDragNativeItem","endDrag","removeSource","isNodeInDocument","Boolean","body","contains","isDragging","cancelHover","scheduleHover","requestAnimationFrame","hover","clientOffset","getEventClientOffset","publishSource","nativeType","matchNativeItemType","setDragImage","sourceNode","dragPreview","offsetX","offsetY","anchorPoint","offsetPoint","dragPreviewOffset","getDragPreviewOffset","x","y","setData","err","publishDragSource","types","hasAttribute","preventDefault","loadDataTransfer","isFirstEnter","enterLeaveCounter","enter","altKey","canDrop","canDropOnTarget","isLastLeave","leave","reset","drop","dragDrop","tagName","isContentEditable","OptionsReader","getActions","getMonitor","getRegistry","EnterLeaveCounter","exports"],"sources":["../src/HTML5BackendImpl.ts"],"sourcesContent":["import type {\n\tBackend,\n\tDragDropActions,\n\tDragDropManager,\n\tDragDropMonitor,\n\tHandlerRegistry,\n\tIdentifier,\n\tUnsubscribe,\n\tXYCoord,\n} from 'dnd-core'\n\nimport { EnterLeaveCounter } from './EnterLeaveCounter.js'\nimport {\n\tcreateNativeDragSource,\n\tmatchNativeItemType,\n} from './NativeDragSources/index.js'\nimport type { NativeDragSource } from './NativeDragSources/NativeDragSource.js'\nimport * as NativeTypes from './NativeTypes.js'\nimport {\n\tgetDragPreviewOffset,\n\tgetEventClientOffset,\n\tgetNodeClientOffset,\n} from './OffsetUtils.js'\nimport { OptionsReader } from './OptionsReader.js'\nimport type { HTML5BackendContext, HTML5BackendOptions } from './types.js'\n\ntype RootNode = Node & { __isReactDndBackendSetUp: boolean | undefined }\n\nexport class HTML5BackendImpl implements Backend {\n\tprivate options: OptionsReader\n\n\t// React-Dnd Components\n\tprivate actions: DragDropActions\n\tprivate monitor: DragDropMonitor\n\tprivate registry: HandlerRegistry\n\n\t// Internal State\n\tprivate enterLeaveCounter: EnterLeaveCounter\n\n\tprivate sourcePreviewNodes: Map<string, Element> = new Map()\n\tprivate sourcePreviewNodeOptions: Map<string, any> = new Map()\n\tprivate sourceNodes: Map<string, Element> = new Map()\n\tprivate sourceNodeOptions: Map<string, any> = new Map()\n\n\tprivate dragStartSourceIds: string[] | null = null\n\tprivate dropTargetIds: string[] = []\n\tprivate dragEnterTargetIds: string[] = []\n\tprivate currentNativeSource: NativeDragSource | null = null\n\tprivate currentNativeHandle: Identifier | null = null\n\tprivate currentDragSourceNode: Element | null = null\n\tprivate altKeyPressed = false\n\tprivate mouseMoveTimeoutTimer: number | null = null\n\tprivate asyncEndDragFrameId: number | null = null\n\tprivate dragOverTargetIds: string[] | null = null\n\n\tprivate lastClientOffset: XYCoord | null = null\n\tprivate hoverRafId: number | null = null\n\n\tpublic constructor(\n\t\tmanager: DragDropManager,\n\t\tglobalContext?: HTML5BackendContext,\n\t\toptions?: HTML5BackendOptions,\n\t) {\n\t\tthis.options = new OptionsReader(globalContext, options)\n\t\tthis.actions = manager.getActions()\n\t\tthis.monitor = manager.getMonitor()\n\t\tthis.registry = manager.getRegistry()\n\t\tthis.enterLeaveCounter = new EnterLeaveCounter(this.isNodeInDocument)\n\t}\n\n\t/**\n\t * Generate profiling statistics for the HTML5Backend.\n\t */\n\tpublic profile(): Record<string, number> {\n\t\treturn {\n\t\t\tsourcePreviewNodes: this.sourcePreviewNodes.size,\n\t\t\tsourcePreviewNodeOptions: this.sourcePreviewNodeOptions.size,\n\t\t\tsourceNodeOptions: this.sourceNodeOptions.size,\n\t\t\tsourceNodes: this.sourceNodes.size,\n\t\t\tdragStartSourceIds: this.dragStartSourceIds?.length || 0,\n\t\t\tdropTargetIds: this.dropTargetIds.length,\n\t\t\tdragEnterTargetIds: this.dragEnterTargetIds.length,\n\t\t\tdragOverTargetIds: this.dragOverTargetIds?.length || 0,\n\t\t}\n\t}\n\n\t// public for test\n\tpublic get window(): Window | undefined {\n\t\treturn this.options.window\n\t}\n\tpublic get document(): Document | undefined {\n\t\treturn this.options.document\n\t}\n\t/**\n\t * Get the root element to use for event subscriptions\n\t */\n\tprivate get rootElement(): Node | undefined {\n\t\treturn this.options.rootElement as Node\n\t}\n\n\tpublic setup(): void {\n\t\tconst root = this.rootElement as RootNode | undefined\n\t\tif (root === undefined) {\n\t\t\treturn\n\t\t}\n\n\t\tif (root.__isReactDndBackendSetUp) {\n\t\t\tthrow new Error('Cannot have two HTML5 backends at the same time.')\n\t\t}\n\t\troot.__isReactDndBackendSetUp = true\n\t\tthis.addEventListeners(root)\n\t}\n\n\tpublic teardown(): void {\n\t\tconst root = this.rootElement as RootNode\n\t\tif (root === undefined) {\n\t\t\treturn\n\t\t}\n\n\t\troot.__isReactDndBackendSetUp = false\n\t\tthis.removeEventListeners(this.rootElement as Element)\n\t\tthis.clearCurrentDragSourceNode()\n\t\tif (this.asyncEndDragFrameId) {\n\t\t\tthis.window?.cancelAnimationFrame(this.asyncEndDragFrameId)\n\t\t}\n\t}\n\n\tpublic connectDragPreview(\n\t\tsourceId: string,\n\t\tnode: Element,\n\t\toptions: any,\n\t): Unsubscribe {\n\t\tthis.sourcePreviewNodeOptions.set(sourceId, options)\n\t\tthis.sourcePreviewNodes.set(sourceId, node)\n\n\t\treturn (): void => {\n\t\t\tthis.sourcePreviewNodes.delete(sourceId)\n\t\t\tthis.sourcePreviewNodeOptions.delete(sourceId)\n\t\t}\n\t}\n\n\tpublic connectDragSource(\n\t\tsourceId: string,\n\t\tnode: Element,\n\t\toptions: any,\n\t): Unsubscribe {\n\t\tthis.sourceNodes.set(sourceId, node)\n\t\tthis.sourceNodeOptions.set(sourceId, options)\n\n\t\tconst handleDragStart = (e: any) => this.handleDragStart(e, sourceId)\n\t\tconst handleSelectStart = (e: any) => this.handleSelectStart(e)\n\n\t\tnode.setAttribute('draggable', 'true')\n\t\tnode.addEventListener('dragstart', handleDragStart)\n\t\tnode.addEventListener('selectstart', handleSelectStart)\n\n\t\treturn (): void => {\n\t\t\tthis.sourceNodes.delete(sourceId)\n\t\t\tthis.sourceNodeOptions.delete(sourceId)\n\n\t\t\tnode.removeEventListener('dragstart', handleDragStart)\n\t\t\tnode.removeEventListener('selectstart', handleSelectStart)\n\t\t\tnode.setAttribute('draggable', 'false')\n\t\t}\n\t}\n\n\tpublic connectDropTarget(targetId: string, node: HTMLElement): Unsubscribe {\n\t\tconst handleDragEnter = (e: DragEvent) => this.handleDragEnter(e, targetId)\n\t\tconst handleDragOver = (e: DragEvent) => this.handleDragOver(e, targetId)\n\t\tconst handleDrop = (e: DragEvent) => this.handleDrop(e, targetId)\n\n\t\tnode.addEventListener('dragenter', handleDragEnter)\n\t\tnode.addEventListener('dragover', handleDragOver)\n\t\tnode.addEventListener('drop', handleDrop)\n\n\t\treturn (): void => {\n\t\t\tnode.removeEventListener('dragenter', handleDragEnter)\n\t\t\tnode.removeEventListener('dragover', handleDragOver)\n\t\t\tnode.removeEventListener('drop', handleDrop)\n\t\t}\n\t}\n\n\tprivate addEventListeners(target: Node) {\n\t\t// SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n\t\tif (!target.addEventListener) {\n\t\t\treturn\n\t\t}\n\t\ttarget.addEventListener(\n\t\t\t'dragstart',\n\t\t\tthis.handleTopDragStart as EventListener,\n\t\t)\n\t\ttarget.addEventListener('dragstart', this.handleTopDragStartCapture, true)\n\t\ttarget.addEventListener('dragend', this.handleTopDragEndCapture, true)\n\t\ttarget.addEventListener(\n\t\t\t'dragenter',\n\t\t\tthis.handleTopDragEnter as EventListener,\n\t\t)\n\t\ttarget.addEventListener(\n\t\t\t'dragenter',\n\t\t\tthis.handleTopDragEnterCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.addEventListener(\n\t\t\t'dragleave',\n\t\t\tthis.handleTopDragLeaveCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.addEventListener('dragover', this.handleTopDragOver as EventListener)\n\t\ttarget.addEventListener(\n\t\t\t'dragover',\n\t\t\tthis.handleTopDragOverCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.addEventListener('drop', this.handleTopDrop as EventListener)\n\t\ttarget.addEventListener(\n\t\t\t'drop',\n\t\t\tthis.handleTopDropCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t}\n\n\tprivate removeEventListeners(target: Node) {\n\t\t// SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n\t\tif (!target.removeEventListener) {\n\t\t\treturn\n\t\t}\n\t\ttarget.removeEventListener('dragstart', this.handleTopDragStart as any)\n\t\ttarget.removeEventListener(\n\t\t\t'dragstart',\n\t\t\tthis.handleTopDragStartCapture,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.removeEventListener('dragend', this.handleTopDragEndCapture, true)\n\t\ttarget.removeEventListener(\n\t\t\t'dragenter',\n\t\t\tthis.handleTopDragEnter as EventListener,\n\t\t)\n\t\ttarget.removeEventListener(\n\t\t\t'dragenter',\n\t\t\tthis.handleTopDragEnterCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.removeEventListener(\n\t\t\t'dragleave',\n\t\t\tthis.handleTopDragLeaveCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.removeEventListener(\n\t\t\t'dragover',\n\t\t\tthis.handleTopDragOver as EventListener,\n\t\t)\n\t\ttarget.removeEventListener(\n\t\t\t'dragover',\n\t\t\tthis.handleTopDragOverCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.removeEventListener('drop', this.handleTopDrop as EventListener)\n\t\ttarget.removeEventListener(\n\t\t\t'drop',\n\t\t\tthis.handleTopDropCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t}\n\n\tprivate getCurrentSourceNodeOptions() {\n\t\tconst sourceId = this.monitor.getSourceId() as string\n\t\tconst sourceNodeOptions = this.sourceNodeOptions.get(sourceId)\n\n\t\treturn {\n\t\t\tdropEffect: this.altKeyPressed ? 'copy' : 'move',\n\t\t\t...(sourceNodeOptions || {}),\n\t\t}\n\t}\n\n\tprivate getCurrentDropEffect() {\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\t// It makes more sense to default to 'copy' for native resources\n\t\t\treturn 'copy'\n\t\t}\n\n\t\treturn this.getCurrentSourceNodeOptions().dropEffect\n\t}\n\n\tprivate getCurrentSourcePreviewNodeOptions() {\n\t\tconst sourceId = this.monitor.getSourceId() as string\n\t\tconst sourcePreviewNodeOptions = this.sourcePreviewNodeOptions.get(sourceId)\n\n\t\treturn {\n\t\t\tanchorX: 0.5,\n\t\t\tanchorY: 0.5,\n\t\t\tcaptureDraggingState: false,\n\t\t\t...(sourcePreviewNodeOptions || {}),\n\t\t}\n\t}\n\n\tprivate getSourceClientOffset = (sourceId: string): XYCoord | null => {\n\t\tconst source = this.sourceNodes.get(sourceId)\n\t\treturn (source && getNodeClientOffset(source as HTMLElement)) || null\n\t}\n\n\tprivate isDraggingNativeItem() {\n\t\tconst itemType = this.monitor.getItemType()\n\t\treturn Object.keys(NativeTypes).some(\n\t\t\t(key: string) => (NativeTypes as any)[key] === itemType,\n\t\t)\n\t}\n\n\tprivate beginDragNativeItem(type: string, dataTransfer?: DataTransfer) {\n\t\tthis.clearCurrentDragSourceNode()\n\n\t\tthis.currentNativeSource = createNativeDragSource(type, dataTransfer)\n\t\tthis.currentNativeHandle = this.registry.addSource(\n\t\t\ttype,\n\t\t\tthis.currentNativeSource,\n\t\t)\n\t\tthis.actions.beginDrag([this.currentNativeHandle])\n\t}\n\n\tprivate endDragNativeItem = (): void => {\n\t\tif (!this.isDraggingNativeItem()) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.actions.endDrag()\n\t\tif (this.currentNativeHandle) {\n\t\t\tthis.registry.removeSource(this.currentNativeHandle)\n\t\t}\n\t\tthis.currentNativeHandle = null\n\t\tthis.currentNativeSource = null\n\t}\n\n\tprivate isNodeInDocument = (node: Node | null | undefined): boolean => {\n\t\t// Check the node either in the main document or in the current context\n\t\treturn Boolean(\n\t\t\tnode &&\n\t\t\t\tthis.document &&\n\t\t\t\tthis.document.body &&\n\t\t\t\tthis.document.body.contains(node),\n\t\t)\n\t}\n\n\tprivate endDragIfSourceWasRemovedFromDOM = (): void => {\n\t\tconst node = this.currentDragSourceNode\n\t\tif (node == null || this.isNodeInDocument(node)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (this.clearCurrentDragSourceNode() && this.monitor.isDragging()) {\n\t\t\tthis.actions.endDrag()\n\t\t}\n\t\tthis.cancelHover()\n\t}\n\n\tprivate setCurrentDragSourceNode(node: Element | null) {\n\t\tthis.clearCurrentDragSourceNode()\n\t\tthis.currentDragSourceNode = node\n\n\t\t// A timeout of > 0 is necessary to resolve Firefox issue referenced\n\t\t// See:\n\t\t//   * https://github.com/react-dnd/react-dnd/pull/928\n\t\t//   * https://github.com/react-dnd/react-dnd/issues/869\n\t\tconst MOUSE_MOVE_TIMEOUT = 1000\n\n\t\t// Receiving a mouse event in the middle of a dragging operation\n\t\t// means it has ended and the drag source node disappeared from DOM,\n\t\t// so the browser didn't dispatch the dragend event.\n\t\t//\n\t\t// We need to wait before we start listening for mousemove events.\n\t\t// This is needed because the drag preview needs to be drawn or else it fires an 'mousemove' event\n\t\t// immediately in some browsers.\n\t\t//\n\t\t// See:\n\t\t//   * https://github.com/react-dnd/react-dnd/pull/928\n\t\t//   * https://github.com/react-dnd/react-dnd/issues/869\n\t\t//\n\t\tthis.mouseMoveTimeoutTimer = setTimeout(() => {\n\t\t\treturn this.rootElement?.addEventListener(\n\t\t\t\t'mousemove',\n\t\t\t\tthis.endDragIfSourceWasRemovedFromDOM,\n\t\t\t\ttrue,\n\t\t\t)\n\t\t}, MOUSE_MOVE_TIMEOUT) as any as number\n\t}\n\n\tprivate clearCurrentDragSourceNode() {\n\t\tif (this.currentDragSourceNode) {\n\t\t\tthis.currentDragSourceNode = null\n\n\t\t\tif (this.rootElement) {\n\t\t\t\tthis.window?.clearTimeout(this.mouseMoveTimeoutTimer || undefined)\n\t\t\t\tthis.rootElement.removeEventListener(\n\t\t\t\t\t'mousemove',\n\t\t\t\t\tthis.endDragIfSourceWasRemovedFromDOM,\n\t\t\t\t\ttrue,\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tthis.mouseMoveTimeoutTimer = null\n\t\t\treturn true\n\t\t}\n\n\t\treturn false\n\t}\n\n\tprivate scheduleHover = (dragOverTargetIds: string[] | null) => {\n\t\tif (\n\t\t\tthis.hoverRafId === null &&\n\t\t\ttypeof requestAnimationFrame !== 'undefined'\n\t\t) {\n\t\t\tthis.hoverRafId = requestAnimationFrame(() => {\n\t\t\t\tif (this.monitor.isDragging()) {\n\t\t\t\t\tthis.actions.hover(dragOverTargetIds || [], {\n\t\t\t\t\t\tclientOffset: this.lastClientOffset,\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tthis.hoverRafId = null\n\t\t\t})\n\t\t}\n\t}\n\n\tprivate cancelHover = () => {\n\t\tif (\n\t\t\tthis.hoverRafId !== null &&\n\t\t\ttypeof cancelAnimationFrame !== 'undefined'\n\t\t) {\n\t\t\tcancelAnimationFrame(this.hoverRafId)\n\t\t\tthis.hoverRafId = null\n\t\t}\n\t}\n\n\tpublic handleTopDragStartCapture = (): void => {\n\t\tthis.clearCurrentDragSourceNode()\n\t\tthis.dragStartSourceIds = []\n\t}\n\n\tpublic handleDragStart(e: DragEvent, sourceId: string): void {\n\t\tif (e.defaultPrevented) {\n\t\t\treturn\n\t\t}\n\n\t\tif (!this.dragStartSourceIds) {\n\t\t\tthis.dragStartSourceIds = []\n\t\t}\n\t\tthis.dragStartSourceIds.unshift(sourceId)\n\t}\n\n\tpublic handleTopDragStart = (e: DragEvent): void => {\n\t\tif (e.defaultPrevented) {\n\t\t\treturn\n\t\t}\n\n\t\tconst { dragStartSourceIds } = this\n\t\tthis.dragStartSourceIds = null\n\n\t\tconst clientOffset = getEventClientOffset(e)\n\n\t\t// Avoid crashing if we missed a drop event or our previous drag died\n\t\tif (this.monitor.isDragging()) {\n\t\t\tthis.actions.endDrag()\n\t\t\tthis.cancelHover()\n\t\t}\n\n\t\t// Don't publish the source just yet (see why below)\n\t\tthis.actions.beginDrag(dragStartSourceIds || [], {\n\t\t\tpublishSource: false,\n\t\t\tgetSourceClientOffset: this.getSourceClientOffset,\n\t\t\tclientOffset,\n\t\t})\n\n\t\tconst { dataTransfer } = e\n\t\tconst nativeType = matchNativeItemType(dataTransfer)\n\n\t\tif (this.monitor.isDragging()) {\n\t\t\tif (dataTransfer && typeof dataTransfer.setDragImage === 'function') {\n\t\t\t\t// Use custom drag image if user specifies it.\n\t\t\t\t// If child drag source refuses drag but parent agrees,\n\t\t\t\t// use parent's node as drag image. Neither works in IE though.\n\t\t\t\tconst sourceId: string = this.monitor.getSourceId() as string\n\t\t\t\tconst sourceNode = this.sourceNodes.get(sourceId)\n\t\t\t\tconst dragPreview = this.sourcePreviewNodes.get(sourceId) || sourceNode\n\n\t\t\t\tif (dragPreview) {\n\t\t\t\t\tconst { anchorX, anchorY, offsetX, offsetY } =\n\t\t\t\t\t\tthis.getCurrentSourcePreviewNodeOptions()\n\t\t\t\t\tconst anchorPoint = { anchorX, anchorY }\n\t\t\t\t\tconst offsetPoint = { offsetX, offsetY }\n\t\t\t\t\tconst dragPreviewOffset = getDragPreviewOffset(\n\t\t\t\t\t\tsourceNode as HTMLElement,\n\t\t\t\t\t\tdragPreview as HTMLElement,\n\t\t\t\t\t\tclientOffset,\n\t\t\t\t\t\tanchorPoint,\n\t\t\t\t\t\toffsetPoint,\n\t\t\t\t\t)\n\n\t\t\t\t\tdataTransfer.setDragImage(\n\t\t\t\t\t\tdragPreview,\n\t\t\t\t\t\tdragPreviewOffset.x,\n\t\t\t\t\t\tdragPreviewOffset.y,\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\t// Firefox won't drag without setting data\n\t\t\t\tdataTransfer?.setData('application/json', {} as any)\n\t\t\t} catch (err) {\n\t\t\t\t// IE doesn't support MIME types in setData\n\t\t\t}\n\n\t\t\t// Store drag source node so we can check whether\n\t\t\t// it is removed from DOM and trigger endDrag manually.\n\t\t\tthis.setCurrentDragSourceNode(e.target as Element)\n\n\t\t\t// Now we are ready to publish the drag source.. or are we not?\n\t\t\tconst { captureDraggingState } = this.getCurrentSourcePreviewNodeOptions()\n\t\t\tif (!captureDraggingState) {\n\t\t\t\t// Usually we want to publish it in the next tick so that browser\n\t\t\t\t// is able to screenshot the current (not yet dragging) state.\n\t\t\t\t//\n\t\t\t\t// It also neatly avoids a situation where render() returns null\n\t\t\t\t// in the same tick for the source element, and browser freaks out.\n\t\t\t\tsetTimeout(() => this.actions.publishDragSource(), 0)\n\t\t\t} else {\n\t\t\t\t// In some cases the user may want to override this behavior, e.g.\n\t\t\t\t// to work around IE not supporting custom drag previews.\n\t\t\t\t//\n\t\t\t\t// When using a custom drag layer, the only way to prevent\n\t\t\t\t// the default drag preview from drawing in IE is to screenshot\n\t\t\t\t// the dragging state in which the node itself has zero opacity\n\t\t\t\t// and height. In this case, though, returning null from render()\n\t\t\t\t// will abruptly end the dragging, which is not obvious.\n\t\t\t\t//\n\t\t\t\t// This is the reason such behavior is strictly opt-in.\n\t\t\t\tthis.actions.publishDragSource()\n\t\t\t}\n\t\t} else if (nativeType) {\n\t\t\t// A native item (such as URL) dragged from inside the document\n\t\t\tthis.beginDragNativeItem(nativeType)\n\t\t} else if (\n\t\t\tdataTransfer &&\n\t\t\t!dataTransfer.types &&\n\t\t\t((e.target && !(e.target as Element).hasAttribute) ||\n\t\t\t\t!(e.target as Element).hasAttribute('draggable'))\n\t\t) {\n\t\t\t// Looks like a Safari bug: dataTransfer.types is null, but there was no draggable.\n\t\t\t// Just let it drag. It's a native type (URL or text) and will be picked up in\n\t\t\t// dragenter handler.\n\t\t\treturn\n\t\t} else {\n\t\t\t// If by this time no drag source reacted, tell browser not to drag.\n\t\t\te.preventDefault()\n\t\t}\n\t}\n\n\tpublic handleTopDragEndCapture = (): void => {\n\t\tif (this.clearCurrentDragSourceNode() && this.monitor.isDragging()) {\n\t\t\t// Firefox can dispatch this event in an infinite loop\n\t\t\t// if dragend handler does something like showing an alert.\n\t\t\t// Only proceed if we have not handled it already.\n\t\t\tthis.actions.endDrag()\n\t\t}\n\t\tthis.cancelHover()\n\t}\n\n\tpublic handleTopDragEnterCapture = (e: DragEvent): void => {\n\t\tthis.dragEnterTargetIds = []\n\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\tthis.currentNativeSource?.loadDataTransfer(e.dataTransfer)\n\t\t}\n\n\t\tconst isFirstEnter = this.enterLeaveCounter.enter(e.target)\n\t\tif (!isFirstEnter || this.monitor.isDragging()) {\n\t\t\treturn\n\t\t}\n\n\t\tconst { dataTransfer } = e\n\t\tconst nativeType = matchNativeItemType(dataTransfer)\n\n\t\tif (nativeType) {\n\t\t\t// A native item (such as file or URL) dragged from outside the document\n\t\t\tthis.beginDragNativeItem(nativeType, dataTransfer as DataTransfer)\n\t\t}\n\t}\n\n\tpublic handleDragEnter(_e: DragEvent, targetId: string): void {\n\t\tthis.dragEnterTargetIds.unshift(targetId)\n\t}\n\n\tpublic handleTopDragEnter = (e: DragEvent): void => {\n\t\tconst { dragEnterTargetIds } = this\n\t\tthis.dragEnterTargetIds = []\n\n\t\tif (!this.monitor.isDragging()) {\n\t\t\t// This is probably a native item type we don't understand.\n\t\t\treturn\n\t\t}\n\n\t\tthis.altKeyPressed = e.altKey\n\n\t\t// If the target changes position as the result of `dragenter`, `dragover` might still\n\t\t// get dispatched despite target being no longer there. The easy solution is to check\n\t\t// whether there actually is a target before firing `hover`.\n\t\tif (dragEnterTargetIds.length > 0) {\n\t\t\tthis.actions.hover(dragEnterTargetIds, {\n\t\t\t\tclientOffset: getEventClientOffset(e),\n\t\t\t})\n\t\t}\n\n\t\tconst canDrop = dragEnterTargetIds.some((targetId) =>\n\t\t\tthis.monitor.canDropOnTarget(targetId),\n\t\t)\n\n\t\tif (canDrop) {\n\t\t\t// IE requires this to fire dragover events\n\t\t\te.preventDefault()\n\t\t\tif (e.dataTransfer) {\n\t\t\t\te.dataTransfer.dropEffect = this.getCurrentDropEffect()\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic handleTopDragOverCapture = (e: DragEvent): void => {\n\t\tthis.dragOverTargetIds = []\n\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\tthis.currentNativeSource?.loadDataTransfer(e.dataTransfer)\n\t\t}\n\t}\n\n\tpublic handleDragOver(_e: DragEvent, targetId: string): void {\n\t\tif (this.dragOverTargetIds === null) {\n\t\t\tthis.dragOverTargetIds = []\n\t\t}\n\t\tthis.dragOverTargetIds.unshift(targetId)\n\t}\n\n\tpublic handleTopDragOver = (e: DragEvent): void => {\n\t\tconst { dragOverTargetIds } = this\n\t\tthis.dragOverTargetIds = []\n\n\t\tif (!this.monitor.isDragging()) {\n\t\t\t// This is probably a native item type we don't understand.\n\t\t\t// Prevent default \"drop and blow away the whole document\" action.\n\t\t\te.preventDefault()\n\t\t\tif (e.dataTransfer) {\n\t\t\t\te.dataTransfer.dropEffect = 'none'\n\t\t\t}\n\t\t\treturn\n\t\t}\n\n\t\tthis.altKeyPressed = e.altKey\n\t\tthis.lastClientOffset = getEventClientOffset(e)\n\n\t\tthis.scheduleHover(dragOverTargetIds)\n\n\t\tconst canDrop = (dragOverTargetIds || []).some((targetId) =>\n\t\t\tthis.monitor.canDropOnTarget(targetId),\n\t\t)\n\n\t\tif (canDrop) {\n\t\t\t// Show user-specified drop effect.\n\t\t\te.preventDefault()\n\t\t\tif (e.dataTransfer) {\n\t\t\t\te.dataTransfer.dropEffect = this.getCurrentDropEffect()\n\t\t\t}\n\t\t} else if (this.isDraggingNativeItem()) {\n\t\t\t// Don't show a nice cursor but still prevent default\n\t\t\t// \"drop and blow away the whole document\" action.\n\t\t\te.preventDefault()\n\t\t} else {\n\t\t\te.preventDefault()\n\t\t\tif (e.dataTransfer) {\n\t\t\t\te.dataTransfer.dropEffect = 'none'\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic handleTopDragLeaveCapture = (e: DragEvent): void => {\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\te.preventDefault()\n\t\t}\n\n\t\tconst isLastLeave = this.enterLeaveCounter.leave(e.target)\n\t\tif (!isLastLeave) {\n\t\t\treturn\n\t\t}\n\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\tsetTimeout(() => this.endDragNativeItem(), 0)\n\t\t}\n\t\tthis.cancelHover()\n\t}\n\n\tpublic handleTopDropCapture = (e: DragEvent): void => {\n\t\tthis.dropTargetIds = []\n\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\te.preventDefault()\n\t\t\tthis.currentNativeSource?.loadDataTransfer(e.dataTransfer)\n\t\t} else if (matchNativeItemType(e.dataTransfer)) {\n\t\t\t// Dragging some elements, like <a> and <img> may still behave like a native drag event,\n\t\t\t// even if the current drag event matches a user-defined type.\n\t\t\t// Stop the default behavior when we're not expecting a native item to be dropped.\n\n\t\t\te.preventDefault()\n\t\t}\n\n\t\tthis.enterLeaveCounter.reset()\n\t}\n\n\tpublic handleDrop(_e: DragEvent, targetId: string): void {\n\t\tthis.dropTargetIds.unshift(targetId)\n\t}\n\n\tpublic handleTopDrop = (e: DragEvent): void => {\n\t\tconst { dropTargetIds } = this\n\t\tthis.dropTargetIds = []\n\n\t\tthis.actions.hover(dropTargetIds, {\n\t\t\tclientOffset: getEventClientOffset(e),\n\t\t})\n\t\tthis.actions.drop({ dropEffect: this.getCurrentDropEffect() })\n\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\tthis.endDragNativeItem()\n\t\t} else if (this.monitor.isDragging()) {\n\t\t\tthis.actions.endDrag()\n\t\t}\n\t\tthis.cancelHover()\n\t}\n\n\tpublic handleSelectStart = (e: DragEvent): void => {\n\t\tconst target = e.target as HTMLElement & { dragDrop: () => void }\n\n\t\t// Only IE requires us to explicitly say\n\t\t// we want drag drop operation to start\n\t\tif (typeof target.dragDrop !== 'function') {\n\t\t\treturn\n\t\t}\n\n\t\t// Inputs and textareas should be selectable\n\t\tif (\n\t\t\ttarget.tagName === 'INPUT' ||\n\t\t\ttarget.tagName === 'SELECT' ||\n\t\t\ttarget.tagName === 'TEXTAREA' ||\n\t\t\ttarget.isContentEditable\n\t\t) {\n\t\t\treturn\n\t\t}\n\n\t\t// For other targets, ask IE\n\t\t// to enable drag and drop\n\t\te.preventDefault()\n\t\ttarget.dragDrop()\n\t}\n}\n"],"mappings":"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"}