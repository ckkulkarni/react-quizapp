a9468849ccf19608719ab38aea21d3c5
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.HandlerRegistryImpl = void 0;
var _asap = require("@react-dnd/asap");
var _invariant = require("@react-dnd/invariant");
var _registry = require("../actions/registry.js");
var _contracts = require("../contracts.js");
var _interfaces = require("../interfaces.js");
var _getNextUniqueId = require("../utils/getNextUniqueId.js");
function getNextHandlerId(role) {
  const id = (0, _getNextUniqueId.getNextUniqueId)().toString();
  switch (role) {
    case _interfaces.HandlerRole.SOURCE:
      return `S${id}`;
    case _interfaces.HandlerRole.TARGET:
      return `T${id}`;
    default:
      throw new Error(`Unknown Handler Role: ${role}`);
  }
}
function parseRoleFromHandlerId(handlerId) {
  switch (handlerId[0]) {
    case 'S':
      return _interfaces.HandlerRole.SOURCE;
    case 'T':
      return _interfaces.HandlerRole.TARGET;
    default:
      throw new Error(`Cannot parse handler ID: ${handlerId}`);
  }
}
function mapContainsValue(map, searchValue) {
  const entries = map.entries();
  let isDone = false;
  do {
    const {
      done,
      value: [, value]
    } = entries.next();
    if (value === searchValue) {
      return true;
    }
    isDone = !!done;
  } while (!isDone);
  return false;
}
class HandlerRegistryImpl {
  addSource(type, source) {
    (0, _contracts.validateType)(type);
    (0, _contracts.validateSourceContract)(source);
    const sourceId = this.addHandler(_interfaces.HandlerRole.SOURCE, type, source);
    this.store.dispatch((0, _registry.addSource)(sourceId));
    return sourceId;
  }
  addTarget(type, target) {
    (0, _contracts.validateType)(type, true);
    (0, _contracts.validateTargetContract)(target);
    const targetId = this.addHandler(_interfaces.HandlerRole.TARGET, type, target);
    this.store.dispatch((0, _registry.addTarget)(targetId));
    return targetId;
  }
  containsHandler(handler) {
    return mapContainsValue(this.dragSources, handler) || mapContainsValue(this.dropTargets, handler);
  }
  getSource(sourceId, includePinned = false) {
    (0, _invariant.invariant)(this.isSourceId(sourceId), 'Expected a valid source ID.');
    const isPinned = includePinned && sourceId === this.pinnedSourceId;
    const source = isPinned ? this.pinnedSource : this.dragSources.get(sourceId);
    return source;
  }
  getTarget(targetId) {
    (0, _invariant.invariant)(this.isTargetId(targetId), 'Expected a valid target ID.');
    return this.dropTargets.get(targetId);
  }
  getSourceType(sourceId) {
    (0, _invariant.invariant)(this.isSourceId(sourceId), 'Expected a valid source ID.');
    return this.types.get(sourceId);
  }
  getTargetType(targetId) {
    (0, _invariant.invariant)(this.isTargetId(targetId), 'Expected a valid target ID.');
    return this.types.get(targetId);
  }
  isSourceId(handlerId) {
    const role = parseRoleFromHandlerId(handlerId);
    return role === _interfaces.HandlerRole.SOURCE;
  }
  isTargetId(handlerId) {
    const role = parseRoleFromHandlerId(handlerId);
    return role === _interfaces.HandlerRole.TARGET;
  }
  removeSource(sourceId) {
    (0, _invariant.invariant)(this.getSource(sourceId), 'Expected an existing source.');
    this.store.dispatch((0, _registry.removeSource)(sourceId));
    (0, _asap.asap)(() => {
      this.dragSources.delete(sourceId);
      this.types.delete(sourceId);
    });
  }
  removeTarget(targetId) {
    (0, _invariant.invariant)(this.getTarget(targetId), 'Expected an existing target.');
    this.store.dispatch((0, _registry.removeTarget)(targetId));
    this.dropTargets.delete(targetId);
    this.types.delete(targetId);
  }
  pinSource(sourceId) {
    const source = this.getSource(sourceId);
    (0, _invariant.invariant)(source, 'Expected an existing source.');
    this.pinnedSourceId = sourceId;
    this.pinnedSource = source;
  }
  unpinSource() {
    (0, _invariant.invariant)(this.pinnedSource, 'No source is pinned at the time.');
    this.pinnedSourceId = null;
    this.pinnedSource = null;
  }
  addHandler(role, type, handler) {
    const id = getNextHandlerId(role);
    this.types.set(id, type);
    if (role === _interfaces.HandlerRole.SOURCE) {
      this.dragSources.set(id, handler);
    } else if (role === _interfaces.HandlerRole.TARGET) {
      this.dropTargets.set(id, handler);
    }
    return id;
  }
  constructor(store) {
    this.types = new Map();
    this.dragSources = new Map();
    this.dropTargets = new Map();
    this.pinnedSourceId = null;
    this.pinnedSource = null;
    this.store = store;
  }
}
exports.HandlerRegistryImpl = HandlerRegistryImpl;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYXNhcCIsInJlcXVpcmUiLCJfaW52YXJpYW50IiwiX3JlZ2lzdHJ5IiwiX2NvbnRyYWN0cyIsIl9pbnRlcmZhY2VzIiwiX2dldE5leHRVbmlxdWVJZCIsImdldE5leHRIYW5kbGVySWQiLCJyb2xlIiwiaWQiLCJnZXROZXh0VW5pcXVlSWQiLCJ0b1N0cmluZyIsIkhhbmRsZXJSb2xlIiwiU09VUkNFIiwiVEFSR0VUIiwiRXJyb3IiLCJwYXJzZVJvbGVGcm9tSGFuZGxlcklkIiwiaGFuZGxlcklkIiwibWFwQ29udGFpbnNWYWx1ZSIsIm1hcCIsInNlYXJjaFZhbHVlIiwiZW50cmllcyIsImlzRG9uZSIsImRvbmUiLCJ2YWx1ZSIsIm5leHQiLCJIYW5kbGVyUmVnaXN0cnlJbXBsIiwiYWRkU291cmNlIiwidHlwZSIsInNvdXJjZSIsInZhbGlkYXRlVHlwZSIsInZhbGlkYXRlU291cmNlQ29udHJhY3QiLCJzb3VyY2VJZCIsImFkZEhhbmRsZXIiLCJzdG9yZSIsImRpc3BhdGNoIiwiYWRkVGFyZ2V0IiwidGFyZ2V0IiwidmFsaWRhdGVUYXJnZXRDb250cmFjdCIsInRhcmdldElkIiwiY29udGFpbnNIYW5kbGVyIiwiaGFuZGxlciIsImRyYWdTb3VyY2VzIiwiZHJvcFRhcmdldHMiLCJnZXRTb3VyY2UiLCJpbmNsdWRlUGlubmVkIiwiaW52YXJpYW50IiwiaXNTb3VyY2VJZCIsImlzUGlubmVkIiwicGlubmVkU291cmNlSWQiLCJwaW5uZWRTb3VyY2UiLCJnZXQiLCJnZXRUYXJnZXQiLCJpc1RhcmdldElkIiwiZ2V0U291cmNlVHlwZSIsInR5cGVzIiwiZ2V0VGFyZ2V0VHlwZSIsInJlbW92ZVNvdXJjZSIsImFzYXAiLCJkZWxldGUiLCJyZW1vdmVUYXJnZXQiLCJwaW5Tb3VyY2UiLCJ1bnBpblNvdXJjZSIsInNldCIsImNvbnN0cnVjdG9yIiwiTWFwIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jbGFzc2VzL0hhbmRsZXJSZWdpc3RyeUltcGwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXNhcCB9IGZyb20gJ0ByZWFjdC1kbmQvYXNhcCdcbmltcG9ydCB7IGludmFyaWFudCB9IGZyb20gJ0ByZWFjdC1kbmQvaW52YXJpYW50J1xuaW1wb3J0IHR5cGUgeyBTdG9yZSB9IGZyb20gJ3JlZHV4J1xuXG5pbXBvcnQge1xuXHRhZGRTb3VyY2UsXG5cdGFkZFRhcmdldCxcblx0cmVtb3ZlU291cmNlLFxuXHRyZW1vdmVUYXJnZXQsXG59IGZyb20gJy4uL2FjdGlvbnMvcmVnaXN0cnkuanMnXG5pbXBvcnQge1xuXHR2YWxpZGF0ZVNvdXJjZUNvbnRyYWN0LFxuXHR2YWxpZGF0ZVRhcmdldENvbnRyYWN0LFxuXHR2YWxpZGF0ZVR5cGUsXG59IGZyb20gJy4uL2NvbnRyYWN0cy5qcydcbmltcG9ydCB0eXBlIHtcblx0RHJhZ1NvdXJjZSxcblx0RHJvcFRhcmdldCxcblx0SGFuZGxlclJlZ2lzdHJ5LFxuXHRJZGVudGlmaWVyLFxuXHRTb3VyY2VUeXBlLFxuXHRUYXJnZXRUeXBlLFxufSBmcm9tICcuLi9pbnRlcmZhY2VzLmpzJ1xuaW1wb3J0IHsgSGFuZGxlclJvbGUgfSBmcm9tICcuLi9pbnRlcmZhY2VzLmpzJ1xuaW1wb3J0IHR5cGUgeyBTdGF0ZSB9IGZyb20gJy4uL3JlZHVjZXJzL2luZGV4LmpzJ1xuaW1wb3J0IHsgZ2V0TmV4dFVuaXF1ZUlkIH0gZnJvbSAnLi4vdXRpbHMvZ2V0TmV4dFVuaXF1ZUlkLmpzJ1xuXG5mdW5jdGlvbiBnZXROZXh0SGFuZGxlcklkKHJvbGU6IEhhbmRsZXJSb2xlKTogc3RyaW5nIHtcblx0Y29uc3QgaWQgPSBnZXROZXh0VW5pcXVlSWQoKS50b1N0cmluZygpXG5cdHN3aXRjaCAocm9sZSkge1xuXHRcdGNhc2UgSGFuZGxlclJvbGUuU09VUkNFOlxuXHRcdFx0cmV0dXJuIGBTJHtpZH1gXG5cdFx0Y2FzZSBIYW5kbGVyUm9sZS5UQVJHRVQ6XG5cdFx0XHRyZXR1cm4gYFQke2lkfWBcblx0XHRkZWZhdWx0OlxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGBVbmtub3duIEhhbmRsZXIgUm9sZTogJHtyb2xlfWApXG5cdH1cbn1cblxuZnVuY3Rpb24gcGFyc2VSb2xlRnJvbUhhbmRsZXJJZChoYW5kbGVySWQ6IHN0cmluZykge1xuXHRzd2l0Y2ggKGhhbmRsZXJJZFswXSkge1xuXHRcdGNhc2UgJ1MnOlxuXHRcdFx0cmV0dXJuIEhhbmRsZXJSb2xlLlNPVVJDRVxuXHRcdGNhc2UgJ1QnOlxuXHRcdFx0cmV0dXJuIEhhbmRsZXJSb2xlLlRBUkdFVFxuXHRcdGRlZmF1bHQ6XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBwYXJzZSBoYW5kbGVyIElEOiAke2hhbmRsZXJJZH1gKVxuXHR9XG59XG5cbmZ1bmN0aW9uIG1hcENvbnRhaW5zVmFsdWU8VD4obWFwOiBNYXA8c3RyaW5nLCBUPiwgc2VhcmNoVmFsdWU6IFQpIHtcblx0Y29uc3QgZW50cmllcyA9IG1hcC5lbnRyaWVzKClcblx0bGV0IGlzRG9uZSA9IGZhbHNlXG5cdGRvIHtcblx0XHRjb25zdCB7XG5cdFx0XHRkb25lLFxuXHRcdFx0dmFsdWU6IFssIHZhbHVlXSxcblx0XHR9ID0gZW50cmllcy5uZXh0KClcblx0XHRpZiAodmFsdWUgPT09IHNlYXJjaFZhbHVlKSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZVxuXHRcdH1cblx0XHRpc0RvbmUgPSAhIWRvbmVcblx0fSB3aGlsZSAoIWlzRG9uZSlcblx0cmV0dXJuIGZhbHNlXG59XG5cbmV4cG9ydCBjbGFzcyBIYW5kbGVyUmVnaXN0cnlJbXBsIGltcGxlbWVudHMgSGFuZGxlclJlZ2lzdHJ5IHtcblx0cHJpdmF0ZSB0eXBlczogTWFwPHN0cmluZywgU291cmNlVHlwZSB8IFRhcmdldFR5cGU+ID0gbmV3IE1hcCgpXG5cdHByaXZhdGUgZHJhZ1NvdXJjZXM6IE1hcDxzdHJpbmcsIERyYWdTb3VyY2U+ID0gbmV3IE1hcCgpXG5cdHByaXZhdGUgZHJvcFRhcmdldHM6IE1hcDxzdHJpbmcsIERyb3BUYXJnZXQ+ID0gbmV3IE1hcCgpXG5cdHByaXZhdGUgcGlubmVkU291cmNlSWQ6IHN0cmluZyB8IG51bGwgPSBudWxsXG5cdHByaXZhdGUgcGlubmVkU291cmNlOiBhbnkgPSBudWxsXG5cdHByaXZhdGUgc3RvcmU6IFN0b3JlPFN0YXRlPlxuXG5cdHB1YmxpYyBjb25zdHJ1Y3RvcihzdG9yZTogU3RvcmU8U3RhdGU+KSB7XG5cdFx0dGhpcy5zdG9yZSA9IHN0b3JlXG5cdH1cblxuXHRwdWJsaWMgYWRkU291cmNlKHR5cGU6IFNvdXJjZVR5cGUsIHNvdXJjZTogRHJhZ1NvdXJjZSk6IHN0cmluZyB7XG5cdFx0dmFsaWRhdGVUeXBlKHR5cGUpXG5cdFx0dmFsaWRhdGVTb3VyY2VDb250cmFjdChzb3VyY2UpXG5cblx0XHRjb25zdCBzb3VyY2VJZCA9IHRoaXMuYWRkSGFuZGxlcihIYW5kbGVyUm9sZS5TT1VSQ0UsIHR5cGUsIHNvdXJjZSlcblx0XHR0aGlzLnN0b3JlLmRpc3BhdGNoKGFkZFNvdXJjZShzb3VyY2VJZCkpXG5cdFx0cmV0dXJuIHNvdXJjZUlkXG5cdH1cblxuXHRwdWJsaWMgYWRkVGFyZ2V0KHR5cGU6IFRhcmdldFR5cGUsIHRhcmdldDogRHJvcFRhcmdldCk6IHN0cmluZyB7XG5cdFx0dmFsaWRhdGVUeXBlKHR5cGUsIHRydWUpXG5cdFx0dmFsaWRhdGVUYXJnZXRDb250cmFjdCh0YXJnZXQpXG5cblx0XHRjb25zdCB0YXJnZXRJZCA9IHRoaXMuYWRkSGFuZGxlcihIYW5kbGVyUm9sZS5UQVJHRVQsIHR5cGUsIHRhcmdldClcblx0XHR0aGlzLnN0b3JlLmRpc3BhdGNoKGFkZFRhcmdldCh0YXJnZXRJZCkpXG5cdFx0cmV0dXJuIHRhcmdldElkXG5cdH1cblxuXHRwdWJsaWMgY29udGFpbnNIYW5kbGVyKGhhbmRsZXI6IERyYWdTb3VyY2UgfCBEcm9wVGFyZ2V0KTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIChcblx0XHRcdG1hcENvbnRhaW5zVmFsdWUodGhpcy5kcmFnU291cmNlcywgaGFuZGxlcikgfHxcblx0XHRcdG1hcENvbnRhaW5zVmFsdWUodGhpcy5kcm9wVGFyZ2V0cywgaGFuZGxlcilcblx0XHQpXG5cdH1cblxuXHRwdWJsaWMgZ2V0U291cmNlKHNvdXJjZUlkOiBzdHJpbmcsIGluY2x1ZGVQaW5uZWQgPSBmYWxzZSk6IERyYWdTb3VyY2Uge1xuXHRcdGludmFyaWFudCh0aGlzLmlzU291cmNlSWQoc291cmNlSWQpLCAnRXhwZWN0ZWQgYSB2YWxpZCBzb3VyY2UgSUQuJylcblx0XHRjb25zdCBpc1Bpbm5lZCA9IGluY2x1ZGVQaW5uZWQgJiYgc291cmNlSWQgPT09IHRoaXMucGlubmVkU291cmNlSWRcblx0XHRjb25zdCBzb3VyY2UgPSBpc1Bpbm5lZCA/IHRoaXMucGlubmVkU291cmNlIDogdGhpcy5kcmFnU291cmNlcy5nZXQoc291cmNlSWQpXG5cdFx0cmV0dXJuIHNvdXJjZVxuXHR9XG5cblx0cHVibGljIGdldFRhcmdldCh0YXJnZXRJZDogc3RyaW5nKTogRHJvcFRhcmdldCB7XG5cdFx0aW52YXJpYW50KHRoaXMuaXNUYXJnZXRJZCh0YXJnZXRJZCksICdFeHBlY3RlZCBhIHZhbGlkIHRhcmdldCBJRC4nKVxuXHRcdHJldHVybiB0aGlzLmRyb3BUYXJnZXRzLmdldCh0YXJnZXRJZCkgYXMgRHJvcFRhcmdldFxuXHR9XG5cblx0cHVibGljIGdldFNvdXJjZVR5cGUoc291cmNlSWQ6IHN0cmluZyk6IElkZW50aWZpZXIge1xuXHRcdGludmFyaWFudCh0aGlzLmlzU291cmNlSWQoc291cmNlSWQpLCAnRXhwZWN0ZWQgYSB2YWxpZCBzb3VyY2UgSUQuJylcblx0XHRyZXR1cm4gdGhpcy50eXBlcy5nZXQoc291cmNlSWQpIGFzIElkZW50aWZpZXJcblx0fVxuXG5cdHB1YmxpYyBnZXRUYXJnZXRUeXBlKHRhcmdldElkOiBzdHJpbmcpOiBJZGVudGlmaWVyIHwgSWRlbnRpZmllcltdIHtcblx0XHRpbnZhcmlhbnQodGhpcy5pc1RhcmdldElkKHRhcmdldElkKSwgJ0V4cGVjdGVkIGEgdmFsaWQgdGFyZ2V0IElELicpXG5cdFx0cmV0dXJuIHRoaXMudHlwZXMuZ2V0KHRhcmdldElkKSBhcyBJZGVudGlmaWVyIHwgSWRlbnRpZmllcltdXG5cdH1cblxuXHRwdWJsaWMgaXNTb3VyY2VJZChoYW5kbGVySWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuXHRcdGNvbnN0IHJvbGUgPSBwYXJzZVJvbGVGcm9tSGFuZGxlcklkKGhhbmRsZXJJZClcblx0XHRyZXR1cm4gcm9sZSA9PT0gSGFuZGxlclJvbGUuU09VUkNFXG5cdH1cblxuXHRwdWJsaWMgaXNUYXJnZXRJZChoYW5kbGVySWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuXHRcdGNvbnN0IHJvbGUgPSBwYXJzZVJvbGVGcm9tSGFuZGxlcklkKGhhbmRsZXJJZClcblx0XHRyZXR1cm4gcm9sZSA9PT0gSGFuZGxlclJvbGUuVEFSR0VUXG5cdH1cblxuXHRwdWJsaWMgcmVtb3ZlU291cmNlKHNvdXJjZUlkOiBzdHJpbmcpOiB2b2lkIHtcblx0XHRpbnZhcmlhbnQodGhpcy5nZXRTb3VyY2Uoc291cmNlSWQpLCAnRXhwZWN0ZWQgYW4gZXhpc3Rpbmcgc291cmNlLicpXG5cdFx0dGhpcy5zdG9yZS5kaXNwYXRjaChyZW1vdmVTb3VyY2Uoc291cmNlSWQpKVxuXHRcdGFzYXAoKCkgPT4ge1xuXHRcdFx0dGhpcy5kcmFnU291cmNlcy5kZWxldGUoc291cmNlSWQpXG5cdFx0XHR0aGlzLnR5cGVzLmRlbGV0ZShzb3VyY2VJZClcblx0XHR9KVxuXHR9XG5cblx0cHVibGljIHJlbW92ZVRhcmdldCh0YXJnZXRJZDogc3RyaW5nKTogdm9pZCB7XG5cdFx0aW52YXJpYW50KHRoaXMuZ2V0VGFyZ2V0KHRhcmdldElkKSwgJ0V4cGVjdGVkIGFuIGV4aXN0aW5nIHRhcmdldC4nKVxuXHRcdHRoaXMuc3RvcmUuZGlzcGF0Y2gocmVtb3ZlVGFyZ2V0KHRhcmdldElkKSlcblx0XHR0aGlzLmRyb3BUYXJnZXRzLmRlbGV0ZSh0YXJnZXRJZClcblx0XHR0aGlzLnR5cGVzLmRlbGV0ZSh0YXJnZXRJZClcblx0fVxuXG5cdHB1YmxpYyBwaW5Tb3VyY2Uoc291cmNlSWQ6IHN0cmluZyk6IHZvaWQge1xuXHRcdGNvbnN0IHNvdXJjZSA9IHRoaXMuZ2V0U291cmNlKHNvdXJjZUlkKVxuXHRcdGludmFyaWFudChzb3VyY2UsICdFeHBlY3RlZCBhbiBleGlzdGluZyBzb3VyY2UuJylcblxuXHRcdHRoaXMucGlubmVkU291cmNlSWQgPSBzb3VyY2VJZFxuXHRcdHRoaXMucGlubmVkU291cmNlID0gc291cmNlXG5cdH1cblxuXHRwdWJsaWMgdW5waW5Tb3VyY2UoKTogdm9pZCB7XG5cdFx0aW52YXJpYW50KHRoaXMucGlubmVkU291cmNlLCAnTm8gc291cmNlIGlzIHBpbm5lZCBhdCB0aGUgdGltZS4nKVxuXG5cdFx0dGhpcy5waW5uZWRTb3VyY2VJZCA9IG51bGxcblx0XHR0aGlzLnBpbm5lZFNvdXJjZSA9IG51bGxcblx0fVxuXG5cdHByaXZhdGUgYWRkSGFuZGxlcihcblx0XHRyb2xlOiBIYW5kbGVyUm9sZSxcblx0XHR0eXBlOiBTb3VyY2VUeXBlIHwgVGFyZ2V0VHlwZSxcblx0XHRoYW5kbGVyOiBEcmFnU291cmNlIHwgRHJvcFRhcmdldCxcblx0KTogc3RyaW5nIHtcblx0XHRjb25zdCBpZCA9IGdldE5leHRIYW5kbGVySWQocm9sZSlcblx0XHR0aGlzLnR5cGVzLnNldChpZCwgdHlwZSlcblx0XHRpZiAocm9sZSA9PT0gSGFuZGxlclJvbGUuU09VUkNFKSB7XG5cdFx0XHR0aGlzLmRyYWdTb3VyY2VzLnNldChpZCwgaGFuZGxlciBhcyBEcmFnU291cmNlKVxuXHRcdH0gZWxzZSBpZiAocm9sZSA9PT0gSGFuZGxlclJvbGUuVEFSR0VUKSB7XG5cdFx0XHR0aGlzLmRyb3BUYXJnZXRzLnNldChpZCwgaGFuZGxlciBhcyBEcm9wVGFyZ2V0KVxuXHRcdH1cblx0XHRyZXR1cm4gaWRcblx0fVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxLQUFBLEdBQUFDLE9BQUE7QUFD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