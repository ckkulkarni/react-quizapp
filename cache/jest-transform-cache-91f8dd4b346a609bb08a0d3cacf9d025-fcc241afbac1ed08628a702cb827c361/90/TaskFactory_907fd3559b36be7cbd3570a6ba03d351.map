{"version":3,"names":["_RawTask","require","TaskFactory","create","task","tasks","freeTasks","t1","length","pop","RawTask","onError","t","constructor","exports"],"sources":["../src/TaskFactory.ts"],"sourcesContent":["import { RawTask } from './RawTask.js'\nimport type { Task } from './types.js'\n\nexport class TaskFactory {\n\tprivate freeTasks: RawTask[] = []\n\n\tpublic constructor(private onError: (err: any) => void) {}\n\n\tpublic create(task: () => void): Task {\n\t\tconst tasks = this.freeTasks\n\t\tconst t = tasks.length\n\t\t\t? (tasks.pop() as RawTask)\n\t\t\t: new RawTask(this.onError, (t) => (tasks[tasks.length] = t))\n\t\tt.task = task\n\t\treturn t\n\t}\n}\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,OAAA;AAGO,MAAMC,WAAW;EAKvBC,MAAaA,CAACC,IAAgB,EAAQ;IACrC,MAAMC,KAAK,GAAG,IAAI,CAACC,SAAS;IAC5B,MAAMC,EAAC,GAAGF,KAAK,CAACG,MAAM,GAClBH,KAAK,CAACI,GAAG,EAAE,GACZ,IAAIC,gBAAO,CAAC,IAAI,CAACC,OAAO,EAAGC,CAAC,IAAMP,KAAK,CAACA,KAAK,CAACG,MAAM,CAAC,GAAGI,CAAC,CAAE;IAC9DL,EAAC,CAACH,IAAI,GAAGA,IAAI;IACb,OAAOG,EAAC;;EARTM,YAA2BF,OAA2B,EAAE;SAA7BA,OAA2B,GAA3BA,OAA2B;SAF9CL,SAAS,GAAc,EAAE;;;AAYjCQ,OAAA,CAAAZ,WAAA,GAAAA,WAAA"}