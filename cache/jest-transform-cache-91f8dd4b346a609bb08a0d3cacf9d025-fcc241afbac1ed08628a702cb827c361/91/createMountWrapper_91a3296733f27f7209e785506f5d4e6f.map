{"version":3,"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","react_1","require","prop_types_1","RootFinder_1","stringOrFunction","default","oneOfType","func","string","makeValidElementType","adapter","validElementTypeRequired","props","propName","args","isValidElementType","isRequired","propValue","TypeError","validElementType","createMountWrapper","node","options","wrappingComponent","WrappingComponent","WrapperComponent","Component","constructor","wrappingComponentProps","context","state","mount","setChildProps","newProps","newContext","callback","undefined","oldProps","oldContext","setState","setWrappingComponentProps","render","refProp","component","createElement","ref","componentDidMount","onRenderCb","propTypes","object","shape","current","any","defaultProps","type","contextTypes","childContextTypes","prototype","getChildContext"],"sources":["createMountWrapper.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// @ts-nocheck\nconst react_1 = __importDefault(require(\"react\"));\nconst prop_types_1 = __importDefault(require(\"prop-types\"));\nconst RootFinder_1 = __importDefault(require(\"./RootFinder\"));\nconst stringOrFunction = prop_types_1.default.oneOfType([prop_types_1.default.func, prop_types_1.default.string]);\nconst makeValidElementType = (adapter) => {\n    if (!adapter) {\n        return stringOrFunction;\n    }\n    function validElementTypeRequired(props, propName, ...args) {\n        if (!adapter.isValidElementType) {\n            return stringOrFunction.isRequired(props, propName, ...args);\n        }\n        const propValue = props[propName];\n        if (adapter.isValidElementType(propValue)) {\n            return null;\n        }\n        return new TypeError(`${propName} must be a valid element type!`);\n    }\n    function validElementType(props, propName, ...args) {\n        const propValue = props[propName];\n        if (propValue == null) {\n            return null;\n        }\n        return validElementTypeRequired(props, propName, ...args);\n    }\n    validElementType.isRequired = validElementTypeRequired;\n    return validElementType;\n};\n/**\n * This is a utility component to wrap around the nodes we are\n * passing in to `mount()`. Theoretically, you could do everything\n * we are doing without this, but this makes it easier since\n * `renderIntoDocument()` doesn't really pass back a reference to\n * the DOM node it rendered to, so we can't really \"re-render\" to\n * pass new props in.\n */\nfunction createMountWrapper(node, options = {}) {\n    const { adapter, wrappingComponent: WrappingComponent } = options;\n    class WrapperComponent extends react_1.default.Component {\n        constructor(...args) {\n            super(...args);\n            const { props, wrappingComponentProps, context } = this.props;\n            this.state = {\n                mount: true,\n                props,\n                wrappingComponentProps,\n                context,\n            };\n        }\n        setChildProps(newProps, newContext, callback = undefined) {\n            const { props: oldProps, context: oldContext } = this.state;\n            const props = { ...oldProps, ...newProps };\n            const context = { ...oldContext, ...newContext };\n            this.setState({ props, context }, callback);\n        }\n        setWrappingComponentProps(props, callback = undefined) {\n            this.setState({ wrappingComponentProps: props }, callback);\n        }\n        render() {\n            const { Component, refProp } = this.props;\n            const { mount, props, wrappingComponentProps } = this.state;\n            if (!mount)\n                return null;\n            const component = react_1.default.createElement(Component, { ref: refProp, ...props });\n            if (WrappingComponent) {\n                return (react_1.default.createElement(WrappingComponent, { ...wrappingComponentProps },\n                    react_1.default.createElement(RootFinder_1.default, null, component)));\n            }\n            return component;\n        }\n        componentDidMount() {\n            const { onRenderCb } = this.props;\n            onRenderCb && onRenderCb(this);\n        }\n    }\n    WrapperComponent.propTypes = {\n        Component: makeValidElementType(adapter).isRequired,\n        context: prop_types_1.default.object,\n        props: prop_types_1.default.object.isRequired,\n        refProp: prop_types_1.default.oneOfType([\n            prop_types_1.default.string,\n            prop_types_1.default.func,\n            prop_types_1.default.shape({\n                current: prop_types_1.default.any,\n            }),\n        ]),\n        wrappingComponentProps: prop_types_1.default.object,\n    };\n    WrapperComponent.defaultProps = {\n        refProp: null,\n        context: null,\n        wrappingComponentProps: null,\n    };\n    if (options.context && (node.type.contextTypes || options.childContextTypes)) {\n        // For full rendering, we are using this wrapper component to provide context if it is\n        // specified in both the options AND the child component defines `contextTypes` statically\n        // OR the merged context types for all children (the node component or deeper children) are\n        // specified in options parameter under childContextTypes.\n        // In that case, we define both a `getChildContext()` function and a `childContextTypes` prop.\n        const childContextTypes = {\n            ...node.type.contextTypes,\n            ...options.childContextTypes,\n        };\n        WrapperComponent.prototype.getChildContext = function getChildContext() {\n            return this.state.context;\n        };\n        WrapperComponent.childContextTypes = childContextTypes;\n    }\n    return WrapperComponent;\n}\nexports.default = createMountWrapper;\n"],"mappings":"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"}